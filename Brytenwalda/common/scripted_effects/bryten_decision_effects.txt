#######################################
#									  #
#         Anglo-Saxon Effects  	      #
#									  #
#######################################
unite_kingdom_england_decision_effects = {# Uniting England
	primary_title = {
		save_scope_as = england_heptarchy_coa
   	}
	# Create the title and make it primary
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_england = {
		change_title_holder = {
			holder = root
			change = scope:title_change
		}
		set_coa = england_heptarchy_coa
	}

	resolve_title_and_vassal_change = scope:title_change
	set_primary_title_to = title:k_england

	title:k_kent = { add_to_list = english_kingdoms }
	title:k_northumbria = { add_to_list = english_kingdoms }
	title:k_mercia = { add_to_list = english_kingdoms }
	title:k_east_anglia = { add_to_list = english_kingdoms }
	title:k_wessex = { add_to_list = english_kingdoms }

	every_in_list = {
		list = english_kingdoms
		every_in_de_jure_hierarchy = {
			limit = {
				tier = tier_duchy
			}
			set_de_jure_liege_title = title:k_england
		}
	}

	hidden_effect = {
		if = {
			limit = { has_title = title:k_kent }
			destroy_title = title:k_kent
		}
		if = {
			limit = { has_title = title:k_northumbria }
			destroy_title = title:k_northumbria
		}
		if = {
			limit = { has_title = title:k_mercia }
			destroy_title = title:k_mercia
		}
		if = {
			limit = { has_title = title:k_east_anglia }
			destroy_title = title:k_east_anglia
		}
		if = {
			limit = { has_title = title:k_wessex }
			destroy_title = title:k_wessex
		}
	}
}
restore_kingdom_kent_decision_scripted_effect = {# Restoring The Kingdom of Kent
	# Create the title and make it primary
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_kent = {
		change_title_holder = {
			holder = root
			change = scope:title_change
		}
	}

	resolve_title_and_vassal_change = scope:title_change
	set_primary_title_to = title:k_kent

	title:d_canterbury = { add_to_list = kentish_kingdom }


	every_in_list = {
		list = kentish_kingdom
		every_in_de_jure_hierarchy = {
			limit = {
				tier = tier_duchy
			}
			set_de_jure_liege_title = title:k_kent
		}
	}

}
restore_kingdom_essex_decision_scripted_effect = {# Restoring The Kingdom of Essex
	# Create the title and make it primary
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_essex = {
		change_title_holder = {
			holder = root
			change = scope:title_change
		}
	}

	resolve_title_and_vassal_change = scope:title_change
	set_primary_title_to = title:d_bedford

	title:d_bedford = { add_to_list = essex_kingdom }


	every_in_list = {
		list = essex_kingdom
		every_in_de_jure_hierarchy = {
			limit = {
				tier = tier_duchy
			}
			set_de_jure_liege_title = title:k_essex
		}
	}

}
#######################################
#									  #
#         Irish Effects  	      	  #
#									  #
#######################################
strengthen_high_king_decision_effects = {
	### Give k_ireland to scope:high_king_ireland.
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
	}
	title:k_ireland = {
		change_title_holder = {
			holder = scope:high_king_ireland
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
	### Give the de jure Ireland the list of all the kings.
	hidden_effect = {
		title:k_ireland = {

			# & title history.
			copy_title_history = title:k_ireland_titular
		}
	}
	### Destroy k_ireland_titular.
	destroy_title = title:k_ireland_titular
	# All claims on k_ireland_titular become claims on k_ireland
	title:k_ireland_titular = {
		every_claimant = {
			custom = strengthen_high_king_decision_effects.all_claimants
			remove_claim = k_ireland_titular
			add_unpressed_claim = title:k_ireland
		}
	}
}
#######################################
#									  #
#         Scottish Effects  	      #
#									  #
#######################################
create_lothian_duchy_effects = {
	scope:founder = {
		# create the duchy
		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:d_lothian = {
			change_title_holder = {
				holder = scope:lothian_creator
				change = scope:title_change
			}
		}
		resolve_title_and_vassal_change = scope:title_change
		##Configure the new de jure setup.
		title:c_lothian = { set_de_jure_liege_title = title:d_lothian }
		title:c_dunbar = { set_de_jure_liege_title = title:d_lothian }
		title:c_teviotdale = { set_de_jure_liege_title = title:d_lothian }
		title:c_linlithgowshire = { set_de_jure_liege_title = title:d_lothian }
		title:c_lanarkshire = { set_de_jure_liege_title = title:d_lothian }
	}
}
integrate_strathclyde_kingdom_effect = {
	##Configure the new de jure setup.
	title:d_galloway = { set_de_jure_liege_title = title:k_scotland }
	hidden_effect = {
		if = {
			limit = { has_title = title:k_strathclyde }
			destroy_title = title:k_strathclyde
		}
	}
}