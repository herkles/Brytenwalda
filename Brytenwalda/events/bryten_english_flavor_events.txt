namespace = bryten_england

#######################################
# Norman Conquest Stuff
#######################################
bryten_england.001 = {# William the Conquerer is Coronated in London at Westminister Abbey.
	type = character_event
	title = bryten_england.001.t
	desc = bryten_england.001.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:140
		has_primary_title = title:k_england
		is_at_war = no # In case Hardrada is still gunning for the throne, Willy will go and fight him first. 
	}
	
	immediate = {
		title:k_england = {# Willy's capital is now in London
			set_capital_county = title:c_middlesex
			copy_title_history = title:k_england_norman_titular
		}
		set_global_variable = {
			name = bryten_william_is_king
			value = yes
		}
	}

	option = {# Interesting
		name = bryten_england.001.coronation
		add_prestige = medium_prestige_gain
	}
}
bryten_england.002 = {# Handing out titles(southern England.
	type = character_event
	title = bryten_england.002.t
	desc = bryten_england.002.desc
	theme = realm
	left_portrait = {
		character = scope:norman_england_king
		animation = personality_bold
	}

	immediate = {
		play_music_cue = "mx_cue_positive_effect"
		establish_norman_adminstration_effects = yes
	}

	option = {# My loyal vassals deserve their rewards
		name = bryten_england.002.titles
		hidden_effect = {
			title:c_hereford = {# Earl of Hereford, given to William FitzOsbern
				change_title_holder = {
					holder = character:6806
					
				}
			}
			title:c_leicestershire = {# Earl of Leicester Given to Robert de Beaumont
				change_title_holder = {
					holder = character:204596
					
				}
			}
			title:c_surrey = {# Earl of Surry, Given to William de Warenne
				change_title_holder = {
					holder = character:172
					
				}
			}
			title:c_gloucestershire = {# Earl of Glousctershire, Given to Turstin FitzRolf
				change_title_holder = {
					holder = character:6806
					
				}
			}
			title:c_cambridgeshire = {# Earl of Cambridgeshire, Given to Picot of Cambridge
				change_title_holder = {
					holder = character:41236
					
				}
			}
			title:c_cheshire = {# Earl of Chester, Given to Gerbod the Fleming
				change_title_holder = {
					holder = character:167007
					
				}
			}
			title:c_devon = {# Earl of Devon, Given to Baldwin de Brionne
				change_title_holder = {
					holder = character:41260
					
				}
			}
			title:c_sussex = {# Earl of Sussex, Given to Roger II de Montgomerie
				change_title_holder = {
					holder = character:152
					
				}
			}
			title:c_kent = {# Earl of Kent, Given to Odo
				change_title_holder = {
					holder = character:148
					
				}
			}
			title:c_essex = {# Earl of Essex, Given to Geoffrey de Mandeville
				change_title_holder = {
					holder = character:129048
					
				}
			}
			title:c_suffolk = {# Earl of Suffolk, Given to Robert le Blount
				change_title_holder = {
					holder = character:41236
					
				}
			}
			title:c_norfolk = {# Earl of place, Given to Radulf 'de Guader' 
				change_title_holder = {
					holder = character:5652
					
				}
			}
			title:c_nottinghamshire = {# Earl of place, Given to NAME
				change_title_holder = {
					holder = character:204596
					
				}
			}
		}
	}

}
bryten_england.003 = {# The harrying of the North.
	type = character_event
	title = bryten_england.003.t
	desc = bryten_england.003.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:140
		has_primary_title = title:k_england
		is_at_war = no # In case Hardrada is still gunning for the throne, Willy will go and fight him first. 
		not = {	exists = global_var:bryten_harrying_the_north } # Don't fire after the Normans consilidate power.
		exists = global_var:bryten_william_is_king # the revolt must have happened 
	}

	immediate = {
		set_global_variable = {
			name = bryten_harrying_the_north
			value = yes
		}
		every_county_in_region = {
			region = custom_northern_england
			change_county_control = -10	
			add_county_modifier = {
				modifier = bryten_harrying_the_north_modifier
				years = 10
			}
		}
		if = {# Edgar is alive
			limit = { character:112 = { is_alive = yes } }
			character:112 = { save_scope_as = anglo_saxon_revolter }
		}
		else_if = {# another member of the house of Wessex is alive
			limit = {
				is_male = yes
				OR = {
					any_ruler = { house = house:house_british_isles_wessex }
					any_vassal_or_below = { house = house:house_british_isles_wessex }
				} 
			}
			save_scope_as = anglo_saxon_revolter
		}
		else = {# one of Harold Godwin's sons are alive
			limit = {
				character:163064 = {
					any_child = {
						is_male = yes
						is_alive = yes
					}
				}
			}			
			save_scope_as = anglo_saxon_revolter
		}
	}
	
	option = {# Interesting
		name = bryten_england.003.harrying
		add_dread = medium_dread_gain
	}

	after = {
		scope:anglo_saxon_revolter = {# this is a scope just in case one dies ahead of the other.
			trigger_event = {
				id = bryten_england.004
				days = { 2 3 }
			}
		}
	}

}
bryten_england.004 = {# Anglo-Saxon revolt.
	type = character_event
	title = bryten_england.004.t
	desc = bryten_england.004.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		set_global_variable = {
			name = bryten_norman_conquest_anglo_saxon_revolt
			value = yes
		}
	}

	option = {# Interesting
		name = bryten_england.004.war
		scope:anglo_saxon_revolter = {# The Revolter start the War
			start_war = {
				cb = claim_cb
				target = character:140
				target_title = title:k_england
			}
		}
		random_character_war = {
			limit = {
				primary_attacker = scope:defender_vassal
			}
			save_scope_as = anglo_saxon_revolt
		}
		hidden_effect = {
			character:140 = {
				every_vassal = {
					limit = {
						OR = {
							culture = culture:anglo_saxon
							culture = culture:anglo_norse
						}
					}
					scope:anglo_saxon_revolt = { add_attacker = character:140 }
				}
			}
		}

	}

	after = {
		character:140 = {
			trigger_event = { id = bryten_england.005 }
		}
		scope:anglo_saxon_revolter = {
			trigger_event = { id = bryten_england.006 }
		}
	}

}
bryten_england.005 = {# Let William Know.
	type = character_event
	title = bryten_england.005.t
	desc = bryten_england.005.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {# Interesting
		name = bryten_england.005.coronation

	}

}
bryten_england.006 = {# Danish support revolter asks
	type = character_event
	title = bryten_england.006.t
	desc = bryten_england.006.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

		
	immediate = {
		random_ruler = {
			limit = { has_title = title:k_denmark }
			save_scope_as = danish_king
		}
	}
	
	option = {# we don't need the Danish
		name = bryten_england.006.no_ask
	}
	option = {# Ask the Danish
		name = bryten_england.006.ask
		scope:danish_king = { trigger_event = { id = bryten_england.007 } }
	}
}
bryten_england.007 = {# Danish support revolter asks - Danish view
	type = character_event
	title = bryten_england.007.t
	desc = bryten_england.007.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {# Join the Revolter
		name = bryten_england.007.join
		scope:anglo_saxon_revolt = { add_attacker = character:140 }
		hidden_effect = {
			set_global_variable = {
				name = bryten_anglo_revolt_danish_accept
				value = yes
			}
			character:140 = { trigger_event = { id = bryten_england.009 } }
			scope:anglo_saxon_revolter = { trigger_event = { id = bryten_england.008 } }
		}
	}
	option = {# I have my own ambitions
		name = bryten_england.007.not_join
	}
}
bryten_england.008 = {# The Danish join the conflict - anglo-saxon
	type = character_event
	title = bryten_england.008.t
	desc = bryten_england.008.desc
	theme = realm

	option = {# Join the war
		name = bryten_england.008.join
	}
}
bryten_england.009 = {# The Danish join the conflict - Normans
	type = character_event
	title = bryten_england.009.t
	desc = bryten_england.009.desc
	theme = realm

	option = {# Join the war
		name = bryten_england.009.join

	}
}
bryten_england.010 = {# Danegeld to defeat Eadgar - William
	type = character_event
	title = bryten_england.010.t
	desc = bryten_england.010.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		is_at_war_with = scope:danish_king
		not = {	exists = global_var:bryten_norman_conquest_danegeld } # Fire Only Once

	}

	immediate = {
		set_global_variable = {
			name = bryten_norman_conquest_danegeld
			value = yes
		}
	}
	
	option = {# Offer the Danegeld
		name = bryten_england.010.bribe
		hidden_effect = {
			scope:danish_king = { trigger_event = { id = bryten_england.008 } }
		}
		
		trigger_event = bryten_england.010
	}
	option = {# We can beat them
		name = bryten_england.010.fight
	}
}
bryten_england.011 = {# The Norman Danegeld.
	type = character_event
	title = bryten_england.011.t
	desc = bryten_england.011.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {# Take the Payment
		name = bryten_england.011.yes
		hidden_effect = {
			character:140 = { trigger_event = { id = bryten_england.013 } }
			scope:anglo_saxon_revolter = { trigger_event = { id = bryten_england.012 } }
		}
	}
	option = {# Why stop now?
		name = bryten_england.011.no
		hidden_effect = {
			character:140 = { trigger_event = { id = bryten_england.014 } }
		}
	}
}
bryten_england.012 = {# The Danes Accept - Revolter
	type = character_event
	title = bryten_england.012.t
	desc = bryten_england.012.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = {# Damn him
		name = bryten_england.012.truce
		add_opinion = {
			target = scope:danish_king
			modifier = hate_opinion
			opinion = -50
		}
	}
}
bryten_england.013 = {# The Danes Accept - William
	type = character_event
	title = bryten_england.013.t
	desc = bryten_england.013.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = {# Good
		name = bryten_england.013.truce
		hidden_effect = {
			pay_short_term_gold = {
				target = scope:danish_king
				gold = root.medium_gold_value
			}
		}
		show_as_tooltip = {
			add_truce_both_ways = {
				character = scope:danish_king
				days = bryten_treaty_truce_danish_norman
				name = BRYTEN_TREATY_TRUCE_DANISH_NORMAN
			}
		}
	}
}
bryten_england.014 = {# The Danes refuse
	type = character_event
	title = bryten_england.014.t
	desc = bryten_england.014.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = {# Interesting
		name = bryten_england.014.war

	}
}
bryten_england.015 = {# The flight of the Anglo-Saxons
	type = character_event
	title = bryten_england.015.t
	desc = bryten_england.015.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:140
		has_primary_title = title:k_england
		is_at_war = no # In case the rebellion is still going on
		not = {	exists = global_var:bryten_anglo_saxons_flee_england } # Fire Only Once
		exists = global_var:bryten_norman_conquest_anglo_saxon_revolt # the revolt must have happened 
	}
	
	immediate = {
		random_ruler = {
			limit = {
				capital_province = { geographical_region = ghw_region_crimea }
			}
			save_scope_as = horse_lord
		}
		random_ruler = {
			limit = { has_title = title:k_scotland }
			save_scope_as = scottish_king
		}
		set_global_variable = {
			name = bryten_anglo_saxons_flee_england
			value = yes
		}
	}

	option = {# watch them run.
		name = bryten_england.015.flight
	}

	after = {
		scope:horse_lord = { trigger_event = bryten_england.016 }
		scope:scottish_king = { trigger_event = bryten_england.017 }
	}

}
bryten_england.016 = {# The Anglo-Saxons arrive in the Steppes
	type = character_event
	title = bryten_england.016.t
	desc = bryten_england.016.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
	
	}

	option = {# I shall be a good Host
		name = bryten_england.016.host
	}
	option = {# Such men could be useful
		name = bryten_england.016.land
	}


}
bryten_england.017 = {# The Saxons Come to Scotland
	type = character_event
	title = bryten_england.017.t
	desc = bryten_england.017.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {# Welcome to Scotland
		name = bryten_england.017.saxons

	}
}
bryten_england.018 = {# William and the normans loses the throne to Edgar or another revolter.
	type = character_event
	title = bryten_england.018.t
	desc = bryten_england.018.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		NOT = { dynasty = dynasty:752 } # The Normans can't be in charge of England
		has_primary_title = title:k_england
		is_at_war = no # In case the rebellion is still going on 
		not = {	exists = global_var:bryten_norman_consilidate_power } # Don't fire after the Normans consilidate power.
		exists = global_var:bryten_norman_conquest_anglo_saxon_revolt # the revolt must have happened 

	}

	immediate = {
		title:k_england = {# Willy's capital is now in London
			copy_title_history = title:k_england_norman_titular
		}
		set_global_variable = {
			name = bryten_anglo_revolt_crowned
			value = yes
		}
	}
	
	option = {# Interesting
		name = bryten_england.018.coronation
		add_prestige = medium_prestige_gain
		hidden_effect = {
			if = { limit = { exists = global_var:bryten_anglo_revolt_danish_accept } }
			scope:danish_king = {
				create_alliance = {
					target = scope:anglo_saxon_revolter
					allied_through_owner = scope:danish_king
					allied_through_target = scope:anglo_saxon_revolter
				}
			}
			scope:anglo_saxon_revolter = {
				pay_short_term_gold = {
					target = scope:danish_king
					gold = root.medium_gold_value
				}
			}

		}
	}
}
bryten_england.019 = {# Consildating Control / replacing the Northern Lords
	type = character_event
	title = bryten_england.019.t
	desc = bryten_england.019.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:140
		has_primary_title = title:k_england
		is_at_war = no # In case Hardrada is still gunning for the throne, Willy will go and fight him first. 
		not = {	exists = global_var:bryten_anglo_revolt_crowned } # Don't fire if the anglo-saxon revolter wins the conflict
		not = {	exists = global_var:bryten_norman_consilidate_power } # Don't fire after the Normans consilidate power.
		exists = global_var:bryten_norman_conquest_anglo_saxon_revolt # the revolt must have happened 
	}

	immediate = {
		set_global_variable = {
			name = bryten_norman_consilidate_power
			value = yes
		}
	}
	
	option = {# hand out the titles to the normans
		name = bryten_england.019.control
	}
}
bryten_england.024 = {# titular title version 2 so that the history list can be brought over. 
	hidden = yes	
	immediate = {
		if = {
			limit = { this = character:140 }
			title:k_england_anglo_saxon_titular = {
				copy_title_history = title:k_england 
			}
		}
	}
}
#######################################
# Harald Hardrada's Conquest
#######################################

#######################################
# King Harold Godwinson Wins
#######################################

#######################################
# Anglo-Saxon Culture Forming
#######################################
bryten_england.30 = {# Anglo-Saxon Culture forming
	type = character_event
	title = bryten_england.30.t
	desc = bryten_england.30.desc
	theme = culture_change
	left_portrait = {
		character = scope:unifier
		animation = personality_bold
	}

	trigger = {
		not = {	exists = global_var:bryten_anglo_saxon_created } # Fire Only Once
		has_title = title:k_england
		any_county_in_region = {# To ensure that you actually rule over england
			region = custom_england
			count >= 28
			OR = {
				holder = root
				holder = {
					any_liege_or_above = { this = root }
				}
			}
		}
		OR = {
			culture = culture:mercian
			culture = culture:northumbrian
			culture = culture:west_saxon
		}
		culture = {
			AND = {
				has_innovation = innovation_chronicle_writing
				has_innovation = innovation_baliffs
			}
		}
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
		set_global_variable = {
			name = bryten_anglo_saxon_created
			value = yes
		}
	}

	option = {
		name = bryten_england.30.a
		embrace_english_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.31
			}
		}
	}
}
bryten_england.31 = {# Players informed
	type = character_event
	title = bryten_england.31.t
	desc = bryten_england.31.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = { # Not norman
		name = bryten_england.31.a
	}
}
#######################################
# Anglo-Norse culture Forming
#######################################
bryten_england.032 = {# Anglo-Norse Culture settlement
	type = character_event
	title = bryten_england.032.t
	desc = bryten_england.032.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
	}

	option = {
		name = bryten_england.032.a
		embrace_anglo_norse_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.033
			}
		}
	}
}
bryten_england.033 = {# Players informed
	type = character_event
	title = bryten_england.032.t
	desc = bryten_england.033.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = {# Interesting
		name = bryten_england.033.a
	}
}
#######################################
# engelsk culture Forming
#######################################
bryten_england.034 = {# engelsk Culture Forming 
	hidden = yes
	
	trigger = {
		not = {	exists = global_var:bryten_engelsk_created } # Fire Only Once
		has_title = title:k_england
		any_county_in_region = {# To ensure that you actually rule over england
			region = custom_england
			count >= 28
			OR = {
				holder = root
				holder = {
					any_liege_or_above = { this = root }
				}
			}
		}
		OR = {# Must be a nordic based culture ruling england
			culture = { has_cultural_pillar = heritage_north_germanic }
			culture = culture:anglo_norse
		}
		any_county_in_region = {# 
			region = custom_england
			culture = { has_cultural_pillar = heritage_west_germanic }
		}
		current_date >= 1100.1.1
	}
	
	immediate = {
		culture:engelsk = {
			reset_culture_creation_date = yes
			get_all_innovations_from = culture:anglo_norse
			get_all_innovations_from = culture:anglo_saxon
		}
		set_global_variable = {
			name = bryten_engelsk_created
			value = yes
		}
	}
}
bryten_england.035 = {# Cities are adopting engelsk Culture
	type = character_event
	title = bryten_england.035.t
	desc = bryten_england.035.desc
	theme = culture_change

	immediate = {
		if = {# Winchester
			limit = { has_title = title:c_hampton }
			title:c_hampton = {
				save_scope_as = bryten_engelsk_winchester
			}
			set_global_variable = {
				name = bryten_engelsk_created_winchester
				value = yes
			}
		}
		if = {# York
			limit = { has_title = title:c_north_riding }
			title:c_north_riding = {
				save_scope_as = bryten_engelsk_york
			}
			set_global_variable = {
				name = bryten_engelsk_created_york
				value = yes
			}
		}
		if = {# London
			limit = { has_title = title:c_middlesex }
			title:c_middlesex = {
				save_scope_as = bryten_engelsk_london
			}
			set_global_variable = {
				name = bryten_engelsk_created_london
				value = yes
			}
		}		
		if = {# Oxford
			limit = { has_title = title:c_oxfordshire }
			title:c_oxfordshire = {
				save_scope_as = bryten_engelsk_oxford
			}
			set_global_variable = {
				name = bryten_engelsk_created_oxford
				value = yes
			}
		}
		if = {# Lincoln
			limit = { has_title = title:c_lincolnshire }
			title:c_lincolnshire = {
				save_scope_as = bryten_engelsk_lincoln
			}
			set_global_variable = {
				name = bryten_engelsk_created_lincoln
				value = yes
			}
		}
		if = {# Bristol
			limit = { has_title = title:c_gloucestershire }
			title:c_gloucestershire = {
				save_scope_as = bryten_engelsk_bristol
			}
			set_global_variable = {
				name = bryten_engelsk_created_bristol
				value = yes
			}
		}
		if = {# Norwich
			limit = { has_title = title:c_norfolk }
			title:c_norfolk = {
				save_scope_as = bryten_engelsk_norwich
			}
			save_scope_as = bryten_engelsk_norwich
			set_global_variable = {
				name = bryten_engelsk_created_norwich
				value = yes
			}
		}
	}

	trigger = {
		OR = {# must own an important English city
			has_title = title:c_hampton # Winchester
			has_title = title:c_north_riding # York
			has_title = title:c_middlesex # London
			has_title = title:c_oxfordshire # Oxford
			has_title = title:c_lincolnshire # Lincoln
			has_title = title:c_gloucestershire # bristol and Glouscster
			has_title = title:c_norfolk # Norwich
		}
		AND = {
			not = {	exists = global_var:bryten_engelsk_created_winchester }
			not = {	exists = global_var:bryten_engelsk_created_york }
			not = {	exists = global_var:bryten_engelsk_created_london }
			not = {	exists = global_var:bryten_engelsk_created_oxford }
			not = {	exists = global_var:bryten_engelsk_created_lincoln }
			not = {	exists = global_var:bryten_engelsk_created_bristol }
			not = {	exists = global_var:bryten_engelsk_created_norwich }
		}
		OR = {# Must be a nordic based culture ruling england
			culture = { has_cultural_pillar = heritage_north_germanic }
			culture = culture:anglo_norse
		}
		exists = global_var:bryten_engelsk_created
		current_date >= 1150.1.1
	}

	option = {# Winchester
		name = bryten_england.035.city
		if = {# Winchester
			limit = {
				exists = global_var:bryten_engelsk_created_winchester
				has_title = title:c_hampton
				NOT = {scope:bryten_engelsk_winchester = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_winchester = {	set_county_culture = culture:engelsk }
		}
		if = {# York
			limit = {
				exists = global_var:bryten_engelsk_created_york
				has_title = title:c_north_riding
				NOT = {scope:bryten_engelsk_york = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_york = {	set_county_culture = culture:engelsk }
		}
		if = {# London
			limit = {
				exists = global_var:bryten_engelsk_created_london
				has_title = title:c_middlesex
				NOT = {scope:bryten_engelsk_london = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_london = {	set_county_culture = culture:engelsk }
		}
		if = {# Oxford
			limit = {
				exists = global_var:bryten_engelsk_created_oxford
				has_title = title:c_oxfordshire
				NOT = {scope:bryten_engelsk_oxford = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_oxford = {	set_county_culture = culture:engelsk }
		}
		if = {# Lincoln
			limit = {
				exists = global_var:bryten_engelsk_created_lincoln
				has_title = title:c_lincolnshire
				NOT = {scope:bryten_engelsk_lincoln = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_lincoln = {	set_county_culture = culture:engelsk }
		}
		if = {# Glouscster
			limit = {
				exists = global_var:bryten_engelsk_created_bristol
				has_title = title:c_gloucestershire
				NOT = {scope:bryten_engelsk_bristol = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_bristol = {	set_county_culture = culture:engelsk }
		}
		if = {# Norwich
			limit = {
				exists = global_var:bryten_engelsk_created_norwich
				has_title = title:c_norfolk
				NOT = {scope:bryten_engelsk_winchester = { has_culture = culture:engelsk } }
			}
			scope:bryten_engelsk_norwich = {	set_county_culture = culture:engelsk }
		}
	}
}
bryten_england.038 = {# The king has embraced engelsk Culture
	type = character_event
	title = bryten_england.038.t
	desc = bryten_england.038.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
	}

	option = {
		name = bryten_england.038.a
		embrace_english_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.039
			}
		}
	}
}
bryten_england.039 = {# Players informed
	type = character_event
	title = bryten_england.038.t
	desc = bryten_england.039.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = { # Not norman
		name = bryten_england.039.a
	}
}
#######################################
# Embrace English culture
#######################################
bryten_england.040 = {# English Culture Forming 
	hidden = yes
	
	trigger = {
		not = {	exists = global_var:bryten_english_created } # Fire Only Once
		has_title = title:k_england
		any_county_in_region = {# To ensure that you actually rule over england
			region = custom_england
			count >= 28
			OR = {
				holder = root
				holder = {
					any_liege_or_above = { this = root }
				}
			}
		}
		culture = { has_cultural_pillar = heritage_frankish }
		any_county_in_region = {# 
			region = custom_england
			culture = { has_cultural_pillar = heritage_west_germanic }
		}
		current_date >= 1150.1.1
	}
	
	immediate = {
		culture:engelsk = {
			reset_culture_creation_date = yes
			get_all_innovations_from = culture:norman
			get_all_innovations_from = culture:anglo_saxon
		}
		set_global_variable = {
			name = bryten_english_created
			value = yes
		}
	}
}
bryten_england.041 = {# Cities are adopting English Culture
	type = character_event
	title = bryten_england.041.t
	desc = bryten_england.041.desc
	theme = culture_change

	trigger = {
		OR = {# must own an important English city
			has_title = title:c_hampton # Winchester
			has_title = title:c_north_riding # York
			has_title = title:c_middlesex # London
			has_title = title:c_oxfordshire # Oxford
			has_title = title:c_lincolnshire # Lincoln
			has_title = title:c_gloucestershire # bristol and Glouscster
			has_title = title:c_norfolk # Norwich
		}
		AND = {
			not = {	exists = global_var:bryten_english_created_winchester }
			not = {	exists = global_var:bryten_english_created_york }
			not = {	exists = global_var:bryten_english_created_london }
			not = {	exists = global_var:bryten_english_created_oxford }
			not = {	exists = global_var:bryten_english_created_lincoln }
			not = {	exists = global_var:bryten_english_created_bristol }
			not = {	exists = global_var:bryten_english_created_norwich }
		}
		culture = { has_cultural_pillar = heritage_frankish }
		exists = global_var:bryten_english_created		
	}

	immediate = {
		if = {# Winchester
			limit = { has_title = title:c_hampton }
			title:c_hampton = {
				save_scope_as = bryten_english_winchester
			}
			set_global_variable = {
				name = bryten_english_created_winchester
				value = yes
			}
		}
		if = {# York
			limit = { has_title = title:c_north_riding }
			title:c_north_riding = {
				save_scope_as = bryten_english_york
			}
			set_global_variable = {
				name = bryten_english_created_york
				value = yes
			}
		}
		if = {# London
			limit = { has_title = title:c_middlesex }
			title:c_middlesex = {
				save_scope_as = bryten_english_london
			}
			set_global_variable = {
				name = bryten_english_created_london
				value = yes
			}
		}		
		if = {# Oxford
			limit = { has_title = title:c_oxfordshire }
			title:c_oxfordshire = {
				save_scope_as = bryten_english_oxford
			}
			set_global_variable = {
				name = bryten_english_created_oxford
				value = yes
			}
		}
		if = {# Lincoln
			limit = { has_title = title:c_lincolnshire }
			title:c_lincolnshire = {
				save_scope_as = bryten_english_lincoln
			}
			set_global_variable = {
				name = bryten_english_created_lincoln
				value = yes
			}
		}
		if = {# Bristol
			limit = { has_title = title:c_gloucestershire }
			title:c_gloucestershire = {
				save_scope_as = bryten_english_bristol
			}
			set_global_variable = {
				name = bryten_english_created_bristol
				value = yes
			}
		}
		if = {# Norwich
			limit = { has_title = title:c_norfolk }
			title:c_norfolk = {
				save_scope_as = bryten_english_norwich
			}
			save_scope_as = bryten_english_norwich
			set_global_variable = {
				name = bryten_english_created_norwich
				value = yes
			}
		}
	}

	option = {# Winchester
		name = bryten_england.041.city
		if = {# Winchester
			limit = {
				exists = global_var:bryten_english_created_winchester
				has_title = title:c_hampton
				NOT = {scope:bryten_english_winchester = { has_culture = culture:english } }
			}
			scope:bryten_english_winchester = {	set_county_culture = culture:english }
		}
		if = {# York
			limit = {
				exists = global_var:bryten_english_created_york
				has_title = title:c_north_riding
				NOT = {scope:bryten_english_york = { has_culture = culture:english } }
			}
			scope:bryten_english_york = {	set_county_culture = culture:english }
		}
		if = {# London
			limit = {
				exists = global_var:bryten_english_created_london
				has_title = title:c_middlesex
				NOT = {scope:bryten_english_london = { has_culture = culture:english } }
			}
			scope:bryten_english_london = {	set_county_culture = culture:english }
		}
		if = {# Oxford
			limit = {
				exists = global_var:bryten_english_created_oxford
				has_title = title:c_oxfordshire
				NOT = {scope:bryten_english_oxford = { has_culture = culture:english } }
			}
			scope:bryten_english_oxford = {	set_county_culture = culture:english }
		}
		if = {# Lincoln
			limit = {
				exists = global_var:bryten_english_created_lincoln
				has_title = title:c_lincolnshire
				NOT = {scope:bryten_english_lincoln = { has_culture = culture:english } }
			}
			scope:bryten_english_lincoln = {	set_county_culture = culture:english }
		}
		if = {# Glouscster
			limit = {
				exists = global_var:bryten_english_created_bristol
				has_title = title:c_gloucestershire
				NOT = {scope:bryten_english_bristol = { has_culture = culture:english } }
			}
			scope:bryten_english_bristol = {	set_county_culture = culture:english }
		}
		if = {# Norwich
			limit = {
				exists = global_var:bryten_english_created_norwich
				has_title = title:c_norfolk
				NOT = {scope:bryten_english_winchester = { has_culture = culture:english } }
			}
			scope:bryten_english_norwich = {	set_county_culture = culture:english }
		}
	}
}
bryten_england.044 = {# The king has embraced English Culture
	type = character_event
	title = bryten_england.044.t
	desc = bryten_england.044.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
	}

	option = {
		name = bryten_england.044.a
		embrace_english_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.045
			}
		}
	}
}
bryten_england.045 = {# Players informed
	type = character_event
	title = bryten_england.044.t
	desc = bryten_england.045.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = { # Not norman
		name = bryten_england.045.a
		trigger = {
			NOT = { has_culture = scope:embracer.culture }
		}
	}
	option = { # Also norman
		name = bryten_england.045.b
		trigger = {
			has_culture = scope:embracer.culture
		}
	}
}
#######################################
# Pilgrimage to Bury St. Edmunds
#######################################
bryten_england.125 = {# The martydom of Edmund. 
	type = character_event
	title = bryten_england.125.t
	desc = bryten_england.125.desc
	theme = friendly
	left_portrait = {
		character = scope:edumund
		animation = happiness
	}

	trigger = {
		has_title = title:k_east_anglia
		not = {	exists = global_var:bryten_monks_take_cuthbert } # Fire Only Once
		this = character:163111
	}

	immediate = {
		character:163064 = { save_scope_as = edumund }
		set_global_variable = {
			name = bryten_monks_take_cuthbert
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.125.edmund
		scope:edumund = {
			death = natural
		}
	}

	after = {
		every_ruler = {# Let other English Kings know of his death
			if = {
				limit = {
					OR = {
						has_primary_title = title:k_kent
						has_primary_title = title:k_northumbria
						has_primary_title = title:k_mercia
						has_primary_title = title:k_wessex
						has_primary_title = title:k_essex
					}
				}
				trigger_event = {
					id = bryten_england.126
					days = { 10 20 }
				}
			}
		}
	}
		
}
bryten_england.126 = {# The martydom of Edmund - other kings of England are informed
	type = character_event
	title = bryten_england.126.t
	desc = bryten_england.126.desc
	theme = friendly
	
	option = { # Ok
		name = bryten_england.126.edmund
	}
		
}
bryten_england.127 = {# The cult of St. Edmund the Martyr 
	type = character_event
	title = bryten_england.127.t
	desc = bryten_england.127.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		OR = {# Have to own territory in East Anglia
			has_title = title:k_east_anglia
			has_title = title:d_east_anglia
			has_title = title:d_norfolk
			has_title = title:c_norfolk
			has_title = title:c_suffolk
			has_title = title:c_cambridgeshire
		}
		religion = religion:christianity_religion # Got to be a Christian
		not = {	exists = global_var:bryten_saint_edmund_cult } # Fire Only Once
	}

	immediate = {
		set_global_variable = {
			name = bryten_saint_edmund_cult
			value = yes
		}
	}
	
	option = { # interesting
		name = bryten_england.127.cult
	}
		
}
bryten_england.128 = {# The abbey at Bury St. Edmunds. 
	type = character_event
	title = bryten_england.128.t
	desc = bryten_england.128.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	immediate = {
		title:b_beodericsworth = {
			save_scope_as = bury_saint_edmunds_title
		}
		set_global_variable = {
			name = bryten_bury_saint_edmunds
			value = yes
		}
	}

	option = { # Ok
		name = bryten_england.128.abbey
		custom_tooltip = bryten_pilgrimage_durham_available_tooltip
		title:b_beodericsworth = {
			set_title_name = b_bury_st_edmunds
		}
	}
		
}
# Pilgrimage to Durham it self
bryten_england.130 = {# Make preparations to begin the pilgrimage
	type = character_event
	title = bryten_england.130.t
	desc = bryten_england.130.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	right_portrait = root
	
	immediate = {
		# Stop characters from planning multiple activities at once
		add_character_flag = planning_an_activity
	}
	
	option = { # Ok
		name = bryten_england.130.pilgrimage
		title:b_beodericsworth.title_province = {	
			spawn_activity = {
				owner = root
				type = activity_edmund_pilgrimage
			}	
		}
	}
}
bryten_england.131 = {# Pilgrimage begins
	type = character_event
	title = bryten_england.131.t
	desc = bryten_england.131.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	
	left_portrait = {
		character = root
		animation = happiness
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = bryten_england.131.pilgrimage

	}

	after = {
		trigger_event = {
			id = bryten_england.132
			days = { 10 20 }
		}
	}

}
bryten_england.132 = {# Arrive in Bury Saint Edmunds
	type = character_event
	title = bryten_england.132.t
	desc = bryten_england.132.desc
	theme = friendly
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.132.arrival
	}

	after = {
		trigger_event = {
			id = bryten_england.133
			days = { 4 12 }
		}
	}

}
bryten_england.133 = {# Meditating in the abbey
	type = character_event
	title = bryten_england.133.t
	desc = bryten_england.133.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.133.abbey
	}

	after = {
		trigger_event = {
			id = bryten_england.134
			days = { 3 6 }
		}
	}
}
bryten_england.134 = {# Visiting the Edmund.
	type = character_event
	title = bryten_england.134.t
	desc = bryten_england.134.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.134.edmund
	}

	after = {
		trigger_event = {
			id = bryten_england.135
			days = { 4 12 }
		}
	}
}
bryten_england.135 = {# Preparing to return home
	type = character_event
	title = bryten_england.135.t
	desc = bryten_england.135.desc
	theme = friendly
	override_background = { event_background = alley_day }
	
	right_portrait = root
	
	option = { # Ok
		name = bryten_england.135.home
	}

	after = {
		trigger_event = {
			id = bryten_england.136
			days = { 10 25 }
		}
	}

}
bryten_england.136 = {# Return home
	type = character_event
	title = bryten_england.136.t
	desc = bryten_england.136.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = bryten_england.136.home
		add_piety = medium_piety_gain
		pilgrimage_additional_reward_effect = yes
		add_trait = pilgrim
	}
	
	after = {
		trigger_event = {
			id = bryten_england.137
			days = 1
		}
	}	
}
bryten_england.137 = {# Misc Cleanup file
	hidden = yes	
	immediate = {
		remove_character_flag = bryten_pilgrimage_edmund
		scope:activity = {
			complete_activity = yes
		}
	}
}
#######################################
# Pilgrimage to Durham
#######################################
bryten_england.140 = {# The Monks of Lindisfarne move the body of St. Cuthbert. 
	type = character_event
	title = bryten_england.140.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { religion = religion:germanic_religion }
				desc = bryten_england.140.desc.pagan
			}
			triggered_desc = {
				trigger = { religion = religion:christianity_religion }
				desc = bryten_england.140.desc.christian
			}
		}
	}
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		has_title = title:c_northumberland
		not = {	exists = global_var:bryten_monks_take_cuthbert } # Fire Only Once
		current_date <= 900.1.1 # The monks left in the 9th century
	}

	immediate = {
		set_global_variable = {
			name = bryten_monks_take_cuthbert
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.140.pagan
	}
	option = { # Ok
		name = bryten_england.140.christian

	}
		
}
bryten_england.141 = {# The Monks bring his body to Durham
	type = character_event
	title = bryten_england.141.t
	desc = bryten_england.141.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	trigger = {
		has_title = title:c_durham
		exists = global_var:bryten_monks_take_cuthbert # The monks have to take the body
		not = {	exists = global_var:bryten_monks_cuthbert_durham } # Fire Only Once
		current_date <= 900.1.1 # The monks get there seven years later.
	}

	immediate = {
		set_global_variable = {
			name = bryten_monks_cuthbert_durham
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.141.durham
	}
		
}
bryten_england.142 = {# Building the tomb for St. Cuthbert. 
	type = character_event
	title = bryten_england.142.t
	desc = bryten_england.142.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		has_title = title:c_durham
		exists = global_var:bryten_monks_cuthbert_durham # The monks have to take the body
		not = {	exists = global_var:bryten_cuthbert_tomb } # Fire Only Once
		any_realm_province = {
			has_building = bryten_building_durham_cathedral_01
		}
	}

	immediate = {
		set_global_variable = {
			name = bryten_cuthbert_tomb
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.142.tomb
		custom_tooltip = bryten_pilgrimage_durham_available_tooltip
	}
		
}
bryten_england.143 = {# St. Cuthbert's Gospel of John.
	type = character_event
	title = bryten_england.143.t
	desc = bryten_england.143.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		has_title = title:c_durham
		not = {	exists = global_var:bryten_cuthbert_gospel } # Fire Only Once
		any_realm_province = {
			has_building = bryten_building_durham_cathedral_02
		}
	}

	immediate = {
		set_global_variable = {
			name = bryten_cuthbert_gospel
			value = yes
		}
	}

	
	option = { # Ok
		name = bryten_england.143.gospel
		add_piety = medium_piety_gain
	}
		
}
# Pilgrimage to Durham it self
bryten_england.150 = {# Make preparations to begin the pilgrimage
	type = character_event
	title = bryten_england.150.t
	desc = bryten_england.150.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	right_portrait = root
	
	immediate = {
		# Stop characters from planning multiple activities at once
		add_character_flag = planning_an_activity
	}
	
	option = { # Ok
		name = bryten_england.150.pilgrimage
		title:c_durham.title_province = {	
			spawn_activity = {
				owner = root
				type = activity_durham_pilgrimage
			}	
		}
	}
}
bryten_england.151 = {# Pilgrimage begins
	type = character_event
	title = bryten_england.151.t
	desc = bryten_england.151.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	
	left_portrait = {
		character = root
		animation = happiness
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = bryten_england.151.pilgrimage

	}

	after = {
		trigger_event = {
			id = bryten_england.152
			days = { 10 20 }
		}
	}

}
bryten_england.152 = {# Arrive in Durham
	type = character_event
	title = bryten_england.152.t
	desc = bryten_england.152.desc
	theme = friendly
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.152.arrival

	}

	after = {
		trigger_event = {
			id = bryten_england.153
			days = { 4 12 }
		}
	}

}
bryten_england.153 = {# Meditating in Durham Cathedral
	type = character_event
	title = bryten_england.153.t
	desc = bryten_england.153.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.153.cathedral
	}

	after = {
		trigger_event = {
			id = bryten_england.154
			days = { 3 6 }
		}
	}
}
bryten_england.154 = {# Visiting the Tomb of the Venerable Bede
	type = character_event
	title = bryten_england.154.t
	desc = bryten_england.154.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_content
	}
	
	immediate = {
		play_music_cue = mx_cue_sacredrite
	}
	
	option = { # Ok
		name = bryten_england.154.bede
	}
	
	after = {
		trigger_event = {
			id = bryten_england.155
			days = { 1 6 }
		}
	}
	
}
bryten_england.155 = {# Visiting the Tomb of St. Cuthbert.
	type = character_event
	title = bryten_england.155.t
	desc = bryten_england.155.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.155.cuthbert
	}

	after = {
		trigger_event = {
			id = bryten_england.156
			days = { 4 12 }
		}
	}
}
bryten_england.156 = {# Preparing to return home
	type = character_event
	title = bryten_england.156.t
	desc = bryten_england.156.desc
	theme = friendly
	override_background = { event_background = alley_day }
	
	right_portrait = root
	
	option = { # Ok
		name = bryten_england.156.home
	}

	after = {
		trigger_event = {
			id = bryten_england.157
			days = { 10 25 }
		}
	}

}
bryten_england.157 = {# Return home
	type = character_event
	title = bryten_england.157.t
	desc = bryten_england.157.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = bryten_england.157.home
		add_piety = medium_piety_gain
		pilgrimage_additional_reward_effect = yes
		add_trait = pilgrim
	}
	
	after = {
		trigger_event = {
			id = bryten_england.158
			days = 1
		}
	}	
}
bryten_england.158 = {# Misc Cleanup file
	hidden = yes	
	immediate = {
		remove_character_flag = bryten_pilgrimage_durham
		scope:activity = {
			complete_activity = yes
		}
	}
}
