namespace = bryten_england

#######################################
# Norman Conquest Stuff
#######################################
bryten_england.001 = {# William the Conquerer is Coronated in London at Westminister Abbey.
	type = character_event
	title = bryten_england.001.t
	desc = bryten_england.001.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:140
		has_title = title:k_england
		is_at_war = no # Willy has to secure his throne first.
		NOT = { has_global_variable = william_is_king }
	}
	
	immediate = {
		title:k_england = {# Willy's capital is now in London
			set_capital_county = title:c_middlesex
			clear_title_laws = yes
		}
		set_global_variable = {
			name = william_is_king
			value = yes
		}
	}

	option = {# Interesting
		name = bryten_england.001.coronation
		custom_tooltip = bryten_william_is_king_tooltip
		if = {# William doesn't need more prestige when he is king. 
			limit = { game_start_date = 1066.9.15 }
			add_prestige = medium_prestige_gain
		}
	}
	after = {
		trigger_event = {# rewarding William's loyal men
			id = bryten_england.002
			days = { 10 20 }
		}
		if = {# This is for the Norman Conquest specifically since he might not fight in Haestings in the fate of england start.
			limit = { game_start_date = 1066.12.25 }
			trigger_event = {# rewarding William's loyal men
				id = bryten_england.003
				days = { 30 60 }
			}
		}
		trigger_event = {# Resistance to William's rule
			id = bryten_england.004
			days = { 40 80 }
		}
	}

}
bryten_england.002 = {# William rewarding his men with land in England. 
	type = character_event
	title = bryten_england.002.t
	desc = bryten_england.002.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		random_knight = {
			limit = { has_culture = culture:norman	}
			save_scope_as = norman_knight
		}
		random_knight = {
			limit = { 
				has_culture = culture:norman
				NOT = {
					this = scope:norman_knight
				} 			
			}
			save_scope_as = norman_knight1
		}
		random_knight = {
			limit = { 
				has_culture = culture:norman
				NOT = {
					this = scope:norman_knight
					this = scope:norman_knight1
				} 			
			}
			save_scope_as = norman_knight2
		}
		random_knight = {
			limit = { 
				has_culture = culture:norman
				NOT = {
					this = scope:norman_knight
					this = scope:norman_knight1
					this = scope:norman_knight2
				} 			
			}
			save_scope_as = norman_knight3
		}		
		random_knight = {
			limit = { 
				has_culture = culture:norman
				NOT = {
					this = scope:norman_knight
					this = scope:norman_knight1
					this = scope:norman_knight2
					this = scope:norman_knight3
				} 			
			}
			save_scope_as = norman_knight4
		}		
		character:140 = {
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { this = title:c_middlesex }

				}
				save_scope_as = norman_england_county
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:norman_england_county
					}

				}
				save_scope_as = norman_england_county2
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:norman_england_county
						this = scope:norman_england_county2
					}

				}
				save_scope_as = norman_england_county3
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:norman_england_county
						this = scope:norman_england_county2
						this = scope:norman_england_county3

					}

				}
				save_scope_as = norman_england_county4
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:norman_england_county
						this = scope:norman_england_county2
						this = scope:norman_england_county3
						this = scope:norman_england_county4

					}

				}
				save_scope_as = norman_england_county5
			}					
		}
	}
	
	option = {# Interesting
		name = bryten_england.002.reward
		custom_tooltip = norman_conquest_reward_men_tt

		hidden_effect = {
			# First Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change
				add_claim_on_loss = yes
			}	
			scope:norman_england_county = {
				change_title_holder = {
					holder = scope:norman_knight
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

			# Second Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change2
				add_claim_on_loss = yes
			}	
			scope:norman_england_county2 = {
				change_title_holder = {
					holder = scope:norman_knight1
					change = scope:change2
				}
			}
			resolve_title_and_vassal_change = scope:change2

			# Third Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change3
				add_claim_on_loss = yes
			}	
			scope:norman_england_county3 = {
				change_title_holder = {
					holder = scope:norman_knight2
					change = scope:change3
				}
			}
			resolve_title_and_vassal_change = scope:change3

			# Fourth Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change4
				add_claim_on_loss = yes
			}	
			scope:norman_england_county4 = {
				change_title_holder = {
					holder = scope:norman_knight3
					change = scope:change4
				}
			}
			resolve_title_and_vassal_change = scope:change4

			# Fifth Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change5
				add_claim_on_loss = yes
			}	
			scope:norman_england_county5 = {
				change_title_holder = {
					holder = scope:norman_knight4
					change = scope:change5
				}
			}
			resolve_title_and_vassal_change = scope:change5

			if = {# these lords already have land in the norman conquest but not the fate of england.
				limit = { game_start_date = 1066.9.15 }
				title:c_norfolk = {
					change_title_holder = {
						holder = character:5652
					}
				}
				title:c_suffolk = {
					change_title_holder = {
						holder = character:41236
					}
				}			
				title:c_cambridgeshire = {
					change_title_holder = {
						holder = character:41236
					}
				}			
				title:c_kent = {
					change_title_holder = {
						holder = character:148
					}
				}
				title:c_surrey = {
					change_title_holder = {
						holder = character:172
					}
				}
				title:c_sussex = {
					change_title_holder = {
						holder = character:152
					}
				}
				title:c_cheshire = {
					change_title_holder = {
						holder = character:167007
					}
				}
				title:c_gloucestershire = {
					change_title_holder = {
						holder = character:6806
					}
				}
				title:c_staffordshire = {
					change_title_holder = {
						holder = character:204596
					}
				}
				title:c_hereford = {
					change_title_holder = {
						holder = character:6806
					}
				}
				title:c_leicestershire = {
					change_title_holder = {
						holder = character:204596
					}
				}
				title:c_nottinghamshire = {
					change_title_holder = {
						holder = character:204596
					}
				}
				title:c_essex = {
					change_title_holder = {
						holder = character:41260
					}
				}
				title:c_devon = {
					change_title_holder = {
						holder = character:140
					}
				}
			}
		}
	}
}
bryten_england.003 = {# The Ermenfried Penitential 
	type = character_event
	title = bryten_england.003.t
	desc = bryten_england.003.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {	
		random_realm_county = {
			limit = { kingdom = title:k_england }
			random_county_province = {
				limit = { has_holding = no }
				save_scope_as = norman_church_province
			}
		}
		if = { # root's counties...
			limit = {
				any_held_title = {
					county_has_empty_province_trigger = yes
					kingdom = title:k_england
				}
			}
			ordered_held_title = {
				limit = {
					county_has_empty_province_trigger = yes
					kingdom = title:k_england
					county_has_no_church_trigger = yes
				}
				alternative_limit = {
					county_has_empty_province_trigger = yes
					kingdom = title:k_england
					county_has_all_holding_types = yes
				}
				alternative_limit = { county_has_empty_province_trigger = yes }
				order_by = development_level
				save_scope_as = norman_church_county
			}
		}
		else = { # ... vassal counties
			ordered_sub_realm_county = {
				limit = {
					holder = { is_vassal_of = ROOT }
					kingdom = title:k_england
					any_county_province = { province_has_no_holding_trigger = yes }
					county_has_no_church_trigger = yes
				}
				alternative_limit = {
					holder = { is_vassal_of = ROOT }
					kingdom = title:k_england
					any_county_province = {	province_has_no_holding_trigger = yes }
					county_has_all_holding_types = yes
				}
				order_by = development_level
				save_scope_as = norman_church_county
			}
		}
		scope:norman_church_county = {
			random_county_province = {
				limit = { province_has_no_holding_trigger = yes }
				save_scope_as = norman_church_province
			}
		}




	}
	
	option = {# I must make penance
		name = bryten_england.003.penance
		remove_short_term_gold = hold_court_holding_cost_cheaper_value
		scope:norman_church_province = {
			begin_create_holding = {
				type = church_holding
				refund_cost = { gold = hold_court_holding_cost_cheaper_value }
			}
		}

	}
}
bryten_england.004 = {# Resistance to William's Control 
	type = character_event
	title = bryten_england.004.t
	desc = bryten_england.004.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {# Interesting
		name = bryten_england.004.rebels
		every_county_in_region = {
			region = custom_england_saxon
			limit = { 
				target_is_de_facto_liege_or_above = root.primary_title
				holder.culture = culture:norman
			}
			change_county_control = -30	
		}
	}
}
bryten_england.005 = {# Rise of The Silvatici 
	type = character_event
	title = bryten_england.005.t
	desc = bryten_england.005.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		has_title = title:k_england
		is_at_war = no # Willy has to secure his throne first.
		has_global_variable = william_is_king # Needs William to be king
		NOT = { has_global_variable = silvatici_bandits_rise_up }
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
	}

	immediate = {
		set_global_variable = {
			name = silvatici_bandits_rise_up
			value = yes
		}
		random_realm_county = {
			limit = {
				kingdom = title:k_england
				holder.culture = culture:norman
			}
			save_scope_as = silvatici_county
		}
	}
	
	option = {# Interesting
		name = bryten_england.005.bandits
		scope:silvatici_county = {
			add_county_modifier = {
				modifier = silvatici_bandits
				days = 360
			}
		}
	}
}
bryten_england.006 = {# The Silvatici rise up - helps Eadric the 'Wild' 
	type = character_event
	title = bryten_england.006.t
	desc = bryten_england.006.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:90027
		is_at_war = yes 
		is_at_war_with = character:140
		has_global_variable = silvatici_bandits_rise_up # this is to happen after the conquest
		NOT = { has_global_variable = eadric_wilde_merry_men }
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
	}

	immediate = {
		set_global_variable = {
			name = eadric_wilde_merry_men
			value = yes
		}
	}
	
	option = {# Interesting
		name = bryten_england.006.bandits
		spawn_army = {
			name = silvatici_bowmen
			location = capital_province
			inheritable = no
			men_at_arms = {
				type = bowmen
				stacks = 1
			}
		}


	}
}
bryten_england.007 = {# Building Castles 
	type = character_event
	title = bryten_england.007.t
	desc = bryten_england.007.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:140
		has_title = title:k_england
		is_at_war = no # Willy has to secure his throne first.
		has_global_variable = william_is_king # Needs William to be king
		NOT = { has_global_variable = castle_building_norman }
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
	}

	immediate = {
		set_global_variable = {
			name = castle_building_norman
			value = yes
		}
	}
	
	option = {# Interesting
		name = bryten_england.007.castles	

		every_county_in_region = {
			region = custom_england_saxon
			limit = {
				target_is_de_facto_liege_or_above = root.primary_title
				holder.culture = culture:norman
			}
			add_county_modifier = {
				modifier = castle_building_norman
				years = 2
			}
		}
	}
}
bryten_england.008 = {# The Exeter Rebellion 
	type = character_event
	title = bryten_england.008.t
	desc = bryten_england.008.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		has_title = title:c_devon # Holds Exeter
		NOT = { culture = culture:norman } # normans won't rebel
		is_at_war = no # Willy has to secure his throne first.
		has_global_variable = william_is_king # Needs William to be king
		NOT = { has_global_variable = exeter_rebelion_debate }
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
	}

	immediate = {
		character:140 = { save_scope_as = norman_king }		
		character:122 = {
			ordered_child = {
				order_by = age
				limit = {
					is_male = yes
					is_alive = yes
				}
				save_scope_as = godwine_head
			}
		}

		set_global_variable = {
			name = exeter_rebelion_debate
			value = yes
		}
	}
	
	option = {# Rebel
		name = bryten_england.008.rebel
		ai_chance = {
			base = 80
		}
		add_character_flag = temp_no_claim_war_cost
		start_war = {
			cb = exeter_rebellion_cb
			target = character:140
			claimant = scope:godwine_head
			target_title = title:k_england
		}
		remove_character_flag = temp_no_claim_war_cost				
		hidden_effect = {
			add_visiting_courtier = scope:godwine_head
			scope:norman_king = {
				trigger_event = {
					id = bryten_england.009
					days = { 5 10 }
				}
			}
		}
	}
	option = {# Don't Rebel
		name = bryten_england.008.loyal
		ai_chance = {
			base = 20
		}
	}
}
bryten_england.009 = {# The Exeter Rebellion 
	type = character_event
	title = bryten_england.009.t
	desc = bryten_england.009.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {# Interesting
		name = bryten_england.009.rebels
	}
}
bryten_england.011 = {# An Envoy from the English  
	type = character_event
	title = bryten_england.011.t
	desc = bryten_england.011.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		this = character:101515
		is_at_war = no
		title:k_england.holder = {	NOT = { has_culture = culture:norman } } # if they beat william they won't send the invite
		title:k_england.holder = {	is_at_war = no } # if there is a rebellion they won't send the invite
		has_title = title:k_denmark # Holds Exeter
		has_global_variable = exeter_rebelion_debate # Should happen after the debate
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
	}

	immediate = {
		character:101515 = { save_scope_as = danish_king }
	}
	
	option = {# Interesting
		name = bryten_england.011.War
		ai_chance = {
			base = 80
		}
		add_character_flag = temp_no_claim_war_cost
		start_war = {
			cb = svend_invasion_cb
			target = character:140
			claimant = scope:danish_king
			target_title = title:k_england
		}
		remove_character_flag = temp_no_claim_war_cost				
		hidden_effect = {
			set_global_variable = {
				name = danish_invansion_england
				value = yes
			}
		}

	}
	option = {# Wait
		name = bryten_england.011.Wait
		ai_chance = {
			base = 20
		}
	}
}
bryten_england.012 = {# Join the Danish? 
	type = character_event
	title = bryten_england.012.t
	desc = bryten_england.012.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		OR = {
			has_culture = culture:anglo_norse	
			has_culture = culture:anglo_saxon	
		}
		has_title = title:d_york # is king of England
		any_character_war = {
			any_war_participant = {
				title:c_north_riding = {
					county_controller = character:101515
				}
			}
		}
		has_global_variable = danish_invansion_england # Should happen after the danish
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
	}	

	immediate = {

		title:d_york.holder = { save_scope_as = english_lord }
		title:k_denmark.holder = { save_scope_as = danish_king }
		random_character_war = {
			limit = { primary_attacker = scope:danish_king }
			save_scope_as = danish_invansion
		}
	}
	
	option = {# Join the war
		name = bryten_england.012.rebel
		ai_chance = {
			base = 80
		}
		hidden_effect = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = york_swaps_sides
			}
			scope:english_lord = { 
				change_liege = {
					liege = scope:danish_king
					change = scope:york_swaps_sides
				}
			}
			resolve_title_and_vassal_change = scope:york_swaps_sides
		}
	}
	option = {# Not time
		name = bryten_england.012.loyal
		ai_chance = {
			base = 20
		}
	}

}
bryten_england.013 = {# The Danish Invansion 
	type = character_event
	title = bryten_england.013.t
	desc = bryten_england.013.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
 		has_title = title:k_england # is king of England
		is_at_war_with = title:k_denmark.holder
		this = character:140
		has_global_variable = danish_invansion_england # Should happen after the debate
		NOT = { has_global_variable = danish_invansion_offer } # once england is secured by the normans this shouldn't happen
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
		any_character_war = {
			war_days >= 30 #a battle has likely happened
		}
	}	

	immediate = {
		character:101515 = { save_scope_as = danish_king }
		set_global_variable = {
			name = danish_invansion_offer
			value = yes
		}
	}
	
	option = {# Danegeld
		name = bryten_england.013.danegeld
		ai_chance = {
			base = 75
		}
		scope:danish_king = {
			trigger_event = {
				id = bryten_england.014
				days = { 10 20 }
			}
		}
	}
	option = {# Fight
		name = bryten_england.013.fight
		ai_chance = {
			base = 25
		}
	}

}
bryten_england.014 = {# The Norman Offer 
	type = character_event
	title = bryten_england.014.t
	desc = bryten_england.014.desc
	theme = martial
	override_background = { event_background = army_camp }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		character:140 = { save_scope_as = norman_king }
	}
	
	option = {# Fight
		name = bryten_england.014.fight
		ai_chance = {
			base = 30
		}
		scope:norman_king = {
			trigger_event = {
				id = bryten_england.015
				days = { 10 20 }
			}
		}
	}
	option = {# Bribe
		name = bryten_england.014.bribe
		ai_chance = {
			base = 70
		}
		scope:norman_king = {
			trigger_event = {
				id = bryten_england.016
				days = { 10 20 }
			}
		}
	}

}
bryten_england.015 = {# The Danes Reject the Danegeld 
	type = character_event
	title = bryten_england.015.t
	desc = bryten_england.015.desc
	theme = martial
	override_background = { event_background = army_camp }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	
	option = {# Interesting
		name = bryten_england.015.rejected

	}
}
bryten_england.016 = {# The Danes accept the Danegeld 
	type = character_event
	title = bryten_england.016.t
	desc = bryten_england.016.desc
	theme = martial
	override_background = { event_background = army_camp }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		title:k_england.holder = { save_scope_as = norman_king }
		title:d_york.holder = { save_scope_as = english_eorl }
		title:k_denmark.holder = { save_scope_as = danish_king }
		
		random_character_war = {
			limit = {
				using_cb = svend_invasion_cb
				primary_attacker = scope:danish_king
				primary_defender = scope:norman_king
			}
			save_scope_as = svend_war
		}
	}
	
	option = {# Interesting
		name = bryten_england.016.accepted
		pay_short_term_gold = {
			target = scope:danish_king
			gold = monumental_gold_value
		}
		scope:svend_war = { end_war = defender }
	}

	after = {
		scope:english_eorl = {
			trigger_event = {
				id = bryten_england.017
				days = { 3 5 }
			}
		}
	}

}
bryten_england.017 = {# The Danes head back home 
	type = character_event
	title = bryten_england.017.t
	desc = bryten_england.017.desc
	theme = martial
	override_background = { event_background = docks }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		title:k_england.holder = { save_scope_as = norman_king }
		title:d_york.holder = { save_scope_as = english_eorl }
		title:k_denmark.holder = { save_scope_as = danish_king }
		
		random_character_war = {
			limit = {
				primary_defender = scope:norman_king
			}
			end_war = white_peace
		}

		if = {
			character:112 = {
				if = {
					limit = { is_alive = yes }
					save_scope_as = english_lord
				}
			}
		}
		else_if = {
			character:112 = {
				ordered_child = {
					order_by = age
					limit = {
						is_male = yes
						is_alive = yes
					}
					save_scope_as = english_lord
				}
			}
		}
		else_if = {
			character:122 = {
				ordered_child = {
					order_by = age
					limit = {
						is_male = yes
						is_alive = yes
					}
					save_scope_as = english_lord
				}
			}
		}
		else = {
			title:d_york.holder = { save_scope_as = english_lord }
		}

		culture:anglo_saxon = {
			change_cultural_acceptance = {
				target = culture:swedish
				value = -15
				desc = cultural_betrayed_us_relations
			}
			change_cultural_acceptance = {
				target = culture:norwegian
				value = -15
				desc = cultural_betrayed_us_relations
			}
			change_cultural_acceptance = {
				target = culture:danish
				value = -15
				desc = cultural_betrayed_us_relations
			}
		}
		culture:anglo_norse = {
			change_cultural_acceptance = {
				target = culture:swedish
				value = -15
				desc = cultural_betrayed_us_relations
			}
			change_cultural_acceptance = {
				target = culture:norwegian
				value = -15
				desc = cultural_betrayed_us_relations
			}
			change_cultural_acceptance = {
				target = culture:danish
				value = -15
				desc = cultural_betrayed_us_relations
			}
		}
	}
	
	option = {# Surrender
		name = bryten_england.017.surrender
		ai_chance = {
			base = 20
		}
		rightfully_imprison_character_effect = {
			TARGET = scope:english_eorl
			IMPRISONER = scope:norman_king
		}
	}
	option = {# Fight on
		name = bryten_england.017.fight
		ai_chance = {
			base = 80
		}
		start_war = {
			cb = northern_rebellion_cb
			target = scope:norman_king
			claimant = scope:english_lord
			target_title = title:k_england
		}
		scope:norman_king = {
			trigger_event = {
				id = bryten_england.018
				days = { 10 20 }
			}
		}
	}
}
bryten_england.018 = {# The English fight on
	type = character_event
	title = bryten_england.018.t
	desc = bryten_england.018.desc
	theme = martial
	override_background = { event_background = army_camp }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		set_global_variable = {
			name = english_fight_on
			value = yes
		}
	}

	option = {# Interesting
		name = bryten_england.018.harrying

	}
}
bryten_england.019 = {# Harrying of the North 
	type = character_event
	title = bryten_england.019.t
	desc = bryten_england.019.desc
	theme = realm
	override_background = { event_background = burning_building }
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		has_title = title:k_england # Holds Exeter
		or = { 
			has_global_variable = northern_rebellion # Should happen after the debate
			has_global_variable = english_fight_on # Should happen after the debate
		}
		NOT = { has_global_variable = norman_england_secured } # once england is secured by the normans this shouldn't happen
		NOT = { has_global_variable = north_harryed } # once england is secured by the normans this shouldn't happen
	}

	immediate = {
		set_global_variable = {
			name = north_harryed
			value = yes
		}
		culture:anglo_saxon = {
			change_cultural_acceptance = {
				target = culture:norman
				value = -15
				desc = cultural_harrying_north_relations
			}
		}
		culture:anglo_norse = {
			change_cultural_acceptance = {
				target = culture:norman
				value = -15
				desc = cultural_harrying_north_relations
			}
		}
	}
	
	option = {# Interesting
		name = bryten_england.019.destroy
		add_dread = massive_dread_gain
		every_county_in_region = {
			region = custom_northern_england_saxon
			limit = { target_is_de_facto_liege_or_above = root.primary_title }
			change_county_control = 30
			change_development_level = -30
			add_county_modifier = {
				modifier = harryed_county
				years = 8
			}	
		}
	}
}
bryten_england.020 = {# Coronation after William 
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = { this = character:112 }
				desc = bryten_england.020.t.edgar
			}
			triggered_desc = {
				trigger = { this = character:101515 }
				desc = bryten_england.020.t.svend
			}
			triggered_desc = {
				trigger = { 
					NOT = {
						this = character:112
						this = character:101515
					}
				}
				desc = bryten_england.020.t.else
			}
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { this = character:112}
				desc = bryten_england.020.desc.edgar
			}
			triggered_desc = {
				trigger = { this = character:101515 }
				desc = bryten_england.020.desc.svend
			}
			triggered_desc = {
				trigger = { 
					NOT = {
						this = character:112
						this = character:101515
					}				
				}
				desc = bryten_england.020.desc.else
			}
		}
	}
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		NOT = { has_culture = culture:norman }
		has_title = title:k_england # Holds Exeter
		NOT = { has_global_variable = edgar_is_king }
		has_global_variable = william_is_king # Should happen after the debate
	}

	immediate = {
		set_global_variable = {
			name = edgar_is_king
			value = yes
		}
		reestablish_saxon_adminstration_effects = yes
	}
	
	option = {# Interesting
		name = bryten_england.020.king
		every_vassal = {
			limit = { special_succession_witengamot_trigger = yes }
			add_opinion = {
				modifier = implemented_traditional_succession_law_opinion
				years = 20
				target = root
			}
			custom = major_decisions.3100.tt_opinion_witengamot
		}
	}

	after = {
		trigger_event = {# Dealing with the Normans
			id = bryten_england.022
			days = { 10 20 }
		}
	}

}
bryten_england.021 = {# War with the North
	hidden = yes	

	trigger = {
		has_title = title:k_england
		is_at_war_with = title:d_york.holder
	}

	immediate = {
		set_global_variable = {
			name = northern_rebellion
			value = yes
		}
	}
}
bryten_england.022 = {# Dealing with the Normans who remain 
	type = character_event
	title = bryten_england.022.t
	desc = bryten_england.022.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		title:k_england.holder = { save_scope_as = saxon_king }

		random_knight = {
			limit = { NOT = { has_culture = culture:norman }	}
			save_scope_as = english_knight
		}
		random_knight = {
			limit = { 
				NOT = { has_culture = culture:norman }
				NOT = {
					this = scope:english_knight
				} 			
			}
			save_scope_as = english_knight1
		}
		random_knight = {
			limit = { 
				NOT = { has_culture = culture:norman }
				NOT = {
					this = scope:english_knight
					this = scope:english_knight1
				} 			
			}
			save_scope_as = english_knight2
		}
		random_knight = {
			limit = { 
				NOT = { has_culture = culture:norman }
				NOT = {
					this = scope:english_knight
					this = scope:english_knight1
					this = scope:english_knight2
				} 			
			}
			save_scope_as = english_knight3
		}		
		random_knight = {
			limit = { 
				NOT = { has_culture = culture:norman }
				NOT = {
					this = scope:english_knight
					this = scope:english_knight1
					this = scope:english_knight2
					this = scope:english_knight3
				} 			
			}
			save_scope_as = english_knight4
		}		
		scope:saxon_king = {
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { this = title:c_middlesex }

				}
				save_scope_as = saxon_england_county
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:saxon_england_county
					}

				}
				save_scope_as = saxon_england_county2
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:saxon_england_county
						this = scope:saxon_england_county2
					}

				}
				save_scope_as = saxon_england_county3
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:saxon_england_county
						this = scope:saxon_england_county2
						this = scope:saxon_england_county3

					}

				}
				save_scope_as = saxon_england_county4
			}
			random_held_title = {
				limit = { 
					tier = tier_county 
					kingdom = title:k_england
					NOT = { 
						this = title:c_middlesex 
						this = scope:saxon_england_county
						this = scope:saxon_england_county2
						this = scope:saxon_england_county3
						this = scope:saxon_england_county4

					}

				}
				save_scope_as = saxon_england_county5
			}					
		}



	}
	
	option = {# Banish
		name = bryten_england.022.banish
		ai_chance = {
			base = 50
		}		
		every_vassal = {
			limit = { 
				has_culture = culture:norman 
				kingdom = title:k_england
			}
			banish = yes
		}
		hidden_effect = {
			# First Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county = {
				change_title_holder = {
					holder = scope:english_knight
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

			# Second Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change2
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county2 = {
				change_title_holder = {
					holder = scope:english_knight1
					change = scope:change2
				}
			}
			resolve_title_and_vassal_change = scope:change2

			# Third Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change3
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county3 = {
				change_title_holder = {
					holder = scope:english_knight2
					change = scope:change3
				}
			}
			resolve_title_and_vassal_change = scope:change3

			# Fourth Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change4
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county4 = {
				change_title_holder = {
					holder = scope:english_knight3
					change = scope:change4
				}
			}
			resolve_title_and_vassal_change = scope:change4

			# Fifth Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change5
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county5 = {
				change_title_holder = {
					holder = scope:english_knight4
					change = scope:change5
				}
			}
			resolve_title_and_vassal_change = scope:change5
		}
	}
	option = {# don't Banish
		name = bryten_england.022.leave
		ai_chance = {
			base = 50
		}
		every_vassal = {
			limit = { 
				NOT = { has_culture = culture:norman } 
				kingdom = title:k_england			
			}
			add_opinion = {
				target = root
				modifier = no_banish_normans
				opinion = -25
			}
		}
		hidden_effect = {
			# First Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county = {
				change_title_holder = {
					holder = scope:english_knight
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

			# Second Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change2
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county2 = {
				change_title_holder = {
					holder = scope:english_knight1
					change = scope:change2
				}
			}
			resolve_title_and_vassal_change = scope:change2

			# Third Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change3
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county3 = {
				change_title_holder = {
					holder = scope:english_knight2
					change = scope:change3
				}
			}
			resolve_title_and_vassal_change = scope:change3

			# Fourth Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change4
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county4 = {
				change_title_holder = {
					holder = scope:english_knight3
					change = scope:change4
				}
			}
			resolve_title_and_vassal_change = scope:change4

			# Fifth Norman County
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = change5
				add_claim_on_loss = yes
			}	
			scope:saxon_england_county5 = {
				change_title_holder = {
					holder = scope:english_knight4
					change = scope:change5
				}
			}
			resolve_title_and_vassal_change = scope:change5
		}
	}

}
bryten_england.023 = {# Norman England Secured 
	type = character_event
	title = bryten_england.023.t
	desc = bryten_england.023.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		has_culture = culture:norman # in case willy dies first.
		has_title = title:k_england
		is_at_war = no # Willy has to secure his throne first.
		current_date >= 1080.1.1
		has_global_variable = william_is_king # Should happen after the debate
		NOT = { has_global_variable = norman_england_secured }
	}

	immediate = {
		set_global_variable = {
			name = norman_england_secured
			value = yes
		}
		save_scope_as = norman_england_king
		establish_norman_adminstration_effects = yes
	}
	
	option = {# Interesting
		name = bryten_england.023.secured
	}
}
#######################################
# Anglo-Saxon Culture Forming
#######################################
bryten_england.029 = {# Anglo-Saxon Secured  
	hidden = yes	

	trigger = {
		not = { exists = global_var:bryten_scots_language_english }
		not = { exists = global_var:bryten_anglo_saxon_secured }
		current_date >= 1150.1.1
		has_title = title:k_england
		has_culture = culture:anglo_saxon
	}

	immediate = {
		set_global_variable = {
			name = bryten_anglo_saxon_secured
			value = yes
		}
	}
}
bryten_england.30 = {# Anglo-Saxon Culture forming
	type = character_event
	title = bryten_england.30.t
	desc = bryten_england.30.desc
	theme = culture_change
	left_portrait = {
		character = scope:unifier
		animation = personality_bold
	}

	trigger = {
		not = {	exists = global_var:bryten_anglo_saxon_created } # Fire Only Once
		has_title = title:k_england
		any_county_in_region = {# To ensure that you actually rule over england
			region = custom_england
			count >= 28
			OR = {
				holder = root
				holder = {
					any_liege_or_above = { this = root }
				}
			}
		}
		OR = {
			culture = culture:east_anglian
			culture = culture:mercian
			culture = culture:northumbrian
			culture = culture:west_saxon
		}
		culture = {
			AND = {
				has_innovation = innovation_chronicle_writing
				has_innovation = innovation_baliffs
			}
		}
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
		set_global_variable = {
			name = bryten_anglo_saxon_created
			value = yes
		}
	}

	option = {
		name = bryten_england.30.a
		unify_anglo_saxon_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.31
			}
		}
	}
}
bryten_england.31 = {# Players informed
	type = character_event
	title = bryten_england.31.t
	desc = bryten_england.31.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = { # Not norman
		name = bryten_england.31.a
	}
}
#######################################
# Anglo-Norse culture Forming
#######################################
bryten_england.032 = {# Anglo-Norse Culture settlement
	type = character_event
	title = bryten_england.032.t
	desc = bryten_england.032.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
	}

	option = {
		name = bryten_england.032.a
		embrace_anglo_norse_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.033
			}
		}
	}
}
bryten_england.033 = {# Players informed
	type = character_event
	title = bryten_england.032.t
	desc = bryten_england.033.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = {# Interesting
		name = bryten_england.033.a
	}
}
#######################################
# Embrace English culture
#######################################
bryten_england.040 = {# English Culture Forming 
	hidden = yes
	
	trigger = {
		not = {	exists = global_var:bryten_english_created } # Fire Only Once
		has_title = title:k_england
		any_county_in_region = {# To ensure that you actually rule over england
			region = custom_england
			count >= 28
			OR = {
				holder = root
				holder = {
					any_liege_or_above = { this = root }
				}
			}
		}
		culture = { has_cultural_pillar = heritage_frankish }
		any_county_in_region = {# 
			region = custom_england
			culture = { has_cultural_pillar = heritage_west_germanic }
		}
		current_date >= 1150.1.1
	}
	
	immediate = {
		culture:engelsk = {
			reset_culture_creation_date = yes
			get_all_innovations_from = culture:norman
			get_all_innovations_from = culture:anglo_saxon
		}
		set_global_variable = {
			name = bryten_english_created
			value = yes
		}
	}
}
bryten_england.041 = {# Cities are adopting English Culture
	type = character_event
	title = bryten_england.041.t
	desc = bryten_england.041.desc
	theme = culture_change

	trigger = {
		OR = {# must own an important English city
			has_title = title:c_hampton # Winchester
			has_title = title:c_north_riding # York
			has_title = title:c_middlesex # London
			has_title = title:c_oxfordshire # Oxford
			has_title = title:c_lincolnshire # Lincoln
			has_title = title:c_gloucestershire # bristol and Glouscster
			has_title = title:c_norfolk # Norwich
		}
		AND = {
			not = {	exists = global_var:bryten_english_created_winchester }
			not = {	exists = global_var:bryten_english_created_york }
			not = {	exists = global_var:bryten_english_created_london }
			not = {	exists = global_var:bryten_english_created_oxford }
			not = {	exists = global_var:bryten_english_created_lincoln }
			not = {	exists = global_var:bryten_english_created_bristol }
			not = {	exists = global_var:bryten_english_created_norwich }
		}
		culture = { has_cultural_pillar = heritage_frankish }
		exists = global_var:bryten_english_created		
	}

	immediate = {
		if = {# Winchester
			limit = { has_title = title:c_hampton }
			title:c_hampton = {
				save_scope_as = bryten_english_winchester
			}
			set_global_variable = {
				name = bryten_english_created_winchester
				value = yes
			}
		}
		if = {# York
			limit = { has_title = title:c_north_riding }
			title:c_north_riding = {
				save_scope_as = bryten_english_york
			}
			set_global_variable = {
				name = bryten_english_created_york
				value = yes
			}
		}
		if = {# London
			limit = { has_title = title:c_middlesex }
			title:c_middlesex = {
				save_scope_as = bryten_english_london
			}
			set_global_variable = {
				name = bryten_english_created_london
				value = yes
			}
		}		
		if = {# Oxford
			limit = { has_title = title:c_oxfordshire }
			title:c_oxfordshire = {
				save_scope_as = bryten_english_oxford
			}
			set_global_variable = {
				name = bryten_english_created_oxford
				value = yes
			}
		}
		if = {# Lincoln
			limit = { has_title = title:c_lincolnshire }
			title:c_lincolnshire = {
				save_scope_as = bryten_english_lincoln
			}
			set_global_variable = {
				name = bryten_english_created_lincoln
				value = yes
			}
		}
		if = {# Bristol
			limit = { has_title = title:c_gloucestershire }
			title:c_gloucestershire = {
				save_scope_as = bryten_english_bristol
			}
			set_global_variable = {
				name = bryten_english_created_bristol
				value = yes
			}
		}
		if = {# Norwich
			limit = { has_title = title:c_norfolk }
			title:c_norfolk = {
				save_scope_as = bryten_english_norwich
			}
			save_scope_as = bryten_english_norwich
			set_global_variable = {
				name = bryten_english_created_norwich
				value = yes
			}
		}
	}

	option = {# Winchester
		name = bryten_england.041.city
		if = {# Winchester
			limit = {
				exists = global_var:bryten_english_created_winchester
				has_title = title:c_hampton
				NOT = {scope:bryten_english_winchester = { has_culture = culture:english } }
			}
			scope:bryten_english_winchester = {	set_county_culture = culture:english }
		}
		if = {# York
			limit = {
				exists = global_var:bryten_english_created_york
				has_title = title:c_north_riding
				NOT = {scope:bryten_english_york = { has_culture = culture:english } }
			}
			scope:bryten_english_york = {	set_county_culture = culture:english }
		}
		if = {# London
			limit = {
				exists = global_var:bryten_english_created_london
				has_title = title:c_middlesex
				NOT = {scope:bryten_english_london = { has_culture = culture:english } }
			}
			scope:bryten_english_london = {	set_county_culture = culture:english }
		}
		if = {# Oxford
			limit = {
				exists = global_var:bryten_english_created_oxford
				has_title = title:c_oxfordshire
				NOT = {scope:bryten_english_oxford = { has_culture = culture:english } }
			}
			scope:bryten_english_oxford = {	set_county_culture = culture:english }
		}
		if = {# Lincoln
			limit = {
				exists = global_var:bryten_english_created_lincoln
				has_title = title:c_lincolnshire
				NOT = {scope:bryten_english_lincoln = { has_culture = culture:english } }
			}
			scope:bryten_english_lincoln = {	set_county_culture = culture:english }
		}
		if = {# Glouscster
			limit = {
				exists = global_var:bryten_english_created_bristol
				has_title = title:c_gloucestershire
				NOT = {scope:bryten_english_bristol = { has_culture = culture:english } }
			}
			scope:bryten_english_bristol = {	set_county_culture = culture:english }
		}
		if = {# Norwich
			limit = {
				exists = global_var:bryten_english_created_norwich
				has_title = title:c_norfolk
				NOT = {scope:bryten_english_winchester = { has_culture = culture:english } }
			}
			scope:bryten_english_norwich = {	set_county_culture = culture:english }
		}
	}
}
bryten_england.044 = {# The king has embraced English Culture
	type = character_event
	title = bryten_england.044.t
	desc = bryten_england.044.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	immediate = {
		save_scope_as = embracer
		culture = { save_scope_as = embracer_former_culture }
	}

	option = {
		name = bryten_england.044.a
		embrace_english_culture_effect = yes
		hidden_effect = { # Moved here from embrace_english_culture_decision
			# Send event to other players
			every_player = {
				limit = {
					NOT = { this = root }
					OR = {
						primary_title = {
							OR = {
								de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege = title:e_britannia
								de_jure_liege.de_jure_liege.de_jure_liege = title:e_britannia
							}
						}
						culture = { has_cultural_pillar = heritage_north_germanic }
						culture = { has_cultural_pillar = heritage_central_germanic }
						culture = { has_cultural_pillar = heritage_west_germanic }
						culture = { has_cultural_pillar = heritage_goidelic }
						culture = { has_cultural_pillar = heritage_brythonic }
					}
				}
				trigger_event = bryten_england.045
			}
		}
	}
}
bryten_england.045 = {# Players informed
	type = character_event
	title = bryten_england.044.t
	desc = bryten_england.045.desc
	theme = culture_change
	left_portrait = {
		character = scope:embracer
		animation = personality_bold
	}

	option = { # Not norman
		name = bryten_england.045.a
		trigger = {
			NOT = { has_culture = scope:embracer.culture }
		}
	}
	option = { # Also norman
		name = bryten_england.045.b
		trigger = {
			has_culture = scope:embracer.culture
		}
	}
}

#######################################
# Norse Invansion Events
#######################################
bryten_england.100 = {# Northumbria is victorious
	type = character_event
	title = bryten_england.100.t
	desc = bryten_england.100.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}

	trigger = {
		NOT = { has_global_variable = northumbria_saxon_king }
		game_start_date = 867.1.1
	}
	
	immediate = {
		set_global_variable = {
			name = northumbria_saxon_king
			value = yes
		}
	}

	option = {# Good Riddence
		name = bryten_england.100.victory
		add_prestige = medium_prestige_gain
		if = {# Duchy of York
			limit = {
				NOT = { title:d_york.holder = { this = root } }
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:d_york = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

		}
		if = {# County of c_west_riding.
			limit = {
				NOT = { title:c_west_riding.holder = { this = root } }
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_west_riding = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

		}
		if = {# County of c_east_riding.
			limit = {
				NOT = { title:c_east_riding.holder = { this = root } }
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_east_riding = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

		}		
		if = {# County of c_north_riding.
			limit = {
				NOT = { title:c_north_riding.holder = { this = root } }
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_north_riding = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change

		}
	}
}
#######################################
# Pilgrimage to Bury St. Edmunds
#######################################
bryten_england.125 = {# The martydom of Edmund. 
	type = character_event
	title = bryten_england.125.t
	desc = bryten_england.125.desc
	theme = friendly
	left_portrait = {
		character = scope:edumund
		animation = happiness
	}

	trigger = {
		has_title = title:k_east_anglia
		not = {	exists = global_var:bryten_monks_take_cuthbert } # Fire Only Once
		this = character:163111
		game_start_date = 867.1.1
	}

	immediate = {
		character:163064 = { save_scope_as = edumund }
		set_global_variable = {
			name = bryten_monks_take_cuthbert
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.125.edmund
		scope:edumund = {
			death = natural
		}
	}

	after = {
		every_ruler = {# Let other English Kings know of his death
			if = {
				limit = {
					OR = {
						has_primary_title = title:k_kent
						has_primary_title = title:k_northumbria
						has_primary_title = title:k_mercia
						has_primary_title = title:k_wessex
						has_primary_title = title:k_essex
					}
				}
				trigger_event = {
					id = bryten_england.126
					days = { 10 20 }
				}
			}
		}
	}
		
}
bryten_england.126 = {# The martydom of Edmund - other kings of England are informed
	type = character_event
	title = bryten_england.126.t
	desc = bryten_england.126.desc
	theme = friendly
	
	option = { # Ok
		name = bryten_england.126.edmund
	}
		
}
bryten_england.127 = {# The cult of St. Edmund the Martyr 
	type = character_event
	title = bryten_england.127.t
	desc = bryten_england.127.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		OR = {# Have to own territory in East Anglia
			has_title = title:k_east_anglia
			has_title = title:d_east_anglia
			has_title = title:d_norfolk
			has_title = title:c_norfolk
			has_title = title:c_suffolk
			has_title = title:c_cambridgeshire
		}
		religion = religion:christianity_religion # Got to be a Christian
		not = {	exists = global_var:bryten_saint_edmund_cult } # Fire Only Once
		game_start_date = 867.1.1
	}

	immediate = {
		set_global_variable = {
			name = bryten_saint_edmund_cult
			value = yes
		}
	}
	
	option = { # interesting
		name = bryten_england.127.cult
	}
		
}
bryten_england.128 = {# The abbey at Bury St. Edmunds. 
	type = character_event
	title = bryten_england.128.t
	desc = bryten_england.128.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	immediate = {
		title:b_beodericsworth = {
			save_scope_as = bury_saint_edmunds_title
		}
		set_global_variable = {
			name = bryten_bury_saint_edmunds
			value = yes
		}
	}

	option = { # Ok
		name = bryten_england.128.abbey
		custom_tooltip = bryten_pilgrimage_durham_available_tooltip
		title:b_beodericsworth = {
			set_title_name = b_bury_st_edmunds
		}
	}
		
}
# Pilgrimage to Durham it self
bryten_england.130 = {# Make preparations to begin the pilgrimage
	type = character_event
	title = bryten_england.130.t
	desc = bryten_england.130.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	right_portrait = root
	
	immediate = {
		# Stop characters from planning multiple activities at once
		add_character_flag = planning_an_activity
	}
	
	option = { # Ok
		name = bryten_england.130.pilgrimage
		title:b_beodericsworth.title_province = {	
			spawn_activity = {
				owner = root
				type = activity_edmund_pilgrimage
			}	
		}
	}
}
bryten_england.131 = {# Pilgrimage begins
	type = character_event
	title = bryten_england.131.t
	desc = bryten_england.131.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	
	left_portrait = {
		character = root
		animation = happiness
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = bryten_england.131.pilgrimage

	}

	after = {
		trigger_event = {
			id = bryten_england.132
			days = { 10 20 }
		}
	}

}
bryten_england.132 = {# Arrive in Bury Saint Edmunds
	type = character_event
	title = bryten_england.132.t
	desc = bryten_england.132.desc
	theme = friendly
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.132.arrival
	}

	after = {
		trigger_event = {
			id = bryten_england.133
			days = { 4 12 }
		}
	}

}
bryten_england.133 = {# Meditating in the abbey
	type = character_event
	title = bryten_england.133.t
	desc = bryten_england.133.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.133.abbey
	}

	after = {
		trigger_event = {
			id = bryten_england.134
			days = { 3 6 }
		}
	}
}
bryten_england.134 = {# Visiting the Edmund.
	type = character_event
	title = bryten_england.134.t
	desc = bryten_england.134.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.134.edmund
	}

	after = {
		trigger_event = {
			id = bryten_england.135
			days = { 4 12 }
		}
	}
}
bryten_england.135 = {# Preparing to return home
	type = character_event
	title = bryten_england.135.t
	desc = bryten_england.135.desc
	theme = friendly
	override_background = { event_background = alley_day }
	
	right_portrait = root
	
	option = { # Ok
		name = bryten_england.135.home
	}

	after = {
		trigger_event = {
			id = bryten_england.136
			days = { 10 25 }
		}
	}

}
bryten_england.136 = {# Return home
	type = character_event
	title = bryten_england.136.t
	desc = bryten_england.136.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = bryten_england.136.home
		add_piety = medium_piety_gain
		pilgrimage_additional_reward_effect = yes
		add_trait = pilgrim
	}
	
	after = {
		trigger_event = {
			id = bryten_england.137
			days = 1
		}
	}	
}
bryten_england.137 = {# Misc Cleanup file
	hidden = yes	
	immediate = {
		remove_character_flag = bryten_pilgrimage_edmund
		scope:activity = {
			complete_activity = yes
		}
	}
}
#######################################
# Pilgrimage to Durham
#######################################
bryten_england.140 = {# The Monks of Lindisfarne move the body of St. Cuthbert. 
	type = character_event
	title = bryten_england.140.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { religion = religion:germanic_religion }
				desc = bryten_england.140.desc.pagan
			}
			triggered_desc = {
				trigger = { religion = religion:christianity_religion }
				desc = bryten_england.140.desc.christian
			}
		}
	}
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		has_title = title:c_northumberland
		not = {	exists = global_var:bryten_monks_take_cuthbert } # Fire Only Once
		current_date <= 900.1.1 # The monks left in the 9th century
	}

	immediate = {
		set_global_variable = {
			name = bryten_monks_take_cuthbert
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.140.pagan
	}
	option = { # Ok
		name = bryten_england.140.christian

	}
		
}
bryten_england.141 = {# The Monks bring his body to Durham
	type = character_event
	title = bryten_england.141.t
	desc = bryten_england.141.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	trigger = {
		has_title = title:c_durham
		exists = global_var:bryten_monks_take_cuthbert # The monks have to take the body
		not = {	exists = global_var:bryten_monks_cuthbert_durham } # Fire Only Once
		current_date <= 900.1.1 # The monks get there seven years later.
	}

	immediate = {
		set_global_variable = {
			name = bryten_monks_cuthbert_durham
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.141.durham
	}
		
}
bryten_england.142 = {# Building the tomb for St. Cuthbert. 
	type = character_event
	title = bryten_england.142.t
	desc = bryten_england.142.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		has_title = title:c_durham
		exists = global_var:bryten_monks_cuthbert_durham # The monks have to take the body
		not = {	exists = global_var:bryten_cuthbert_tomb } # Fire Only Once
		any_realm_province = {
			has_building = bryten_building_durham_cathedral_01
		}
	}

	immediate = {
		set_global_variable = {
			name = bryten_cuthbert_tomb
			value = yes
		}
	}
	
	option = { # Ok
		name = bryten_england.142.tomb
		custom_tooltip = bryten_pilgrimage_durham_available_tooltip
	}
		
}
bryten_england.143 = {# St. Cuthbert's Gospel of John.
	type = character_event
	title = bryten_england.143.t
	desc = bryten_england.143.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}

	trigger = {
		has_title = title:c_durham
		not = {	exists = global_var:bryten_cuthbert_gospel } # Fire Only Once
		any_realm_province = {
			has_building = bryten_building_durham_cathedral_02
		}
	}

	immediate = {
		set_global_variable = {
			name = bryten_cuthbert_gospel
			value = yes
		}
	}

	
	option = { # Ok
		name = bryten_england.143.gospel
		add_piety = medium_piety_gain
	}
		
}
# Pilgrimage to Durham it self
bryten_england.150 = {# Make preparations to begin the pilgrimage
	type = character_event
	title = bryten_england.150.t
	desc = bryten_england.150.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	right_portrait = root
	
	immediate = {
		# Stop characters from planning multiple activities at once
		add_character_flag = planning_an_activity
	}
	
	option = { # Ok
		name = bryten_england.150.pilgrimage
		title:c_durham.title_province = {	
			spawn_activity = {
				owner = root
				type = activity_durham_pilgrimage
			}	
		}
	}
}
bryten_england.151 = {# Pilgrimage begins
	type = character_event
	title = bryten_england.151.t
	desc = bryten_england.151.desc
	theme = friendly
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_faith.dds"
	}
	
	left_portrait = {
		character = root
		animation = happiness
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = bryten_england.151.pilgrimage

	}

	after = {
		trigger_event = {
			id = bryten_england.152
			days = { 10 20 }
		}
	}

}
bryten_england.152 = {# Arrive in Durham
	type = character_event
	title = bryten_england.152.t
	desc = bryten_england.152.desc
	theme = friendly
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.152.arrival

	}

	after = {
		trigger_event = {
			id = bryten_england.153
			days = { 4 12 }
		}
	}

}
bryten_england.153 = {# Meditating in Durham Cathedral
	type = character_event
	title = bryten_england.153.t
	desc = bryten_england.153.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.153.cathedral
	}

	after = {
		trigger_event = {
			id = bryten_england.154
			days = { 3 6 }
		}
	}
}
bryten_england.154 = {# Visiting the Tomb of the Venerable Bede
	type = character_event
	title = bryten_england.154.t
	desc = bryten_england.154.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_content
	}
	
	immediate = {
		play_music_cue = mx_cue_sacredrite
	}
	
	option = { # Ok
		name = bryten_england.154.bede
	}
	
	after = {
		trigger_event = {
			id = bryten_england.155
			days = { 1 6 }
		}
	}
	
}
bryten_england.155 = {# Visiting the Tomb of St. Cuthbert.
	type = character_event
	title = bryten_england.155.t
	desc = bryten_england.155.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = bryten_england.155.cuthbert
	}

	after = {
		trigger_event = {
			id = bryten_england.156
			days = { 4 12 }
		}
	}
}
bryten_england.156 = {# Preparing to return home
	type = character_event
	title = bryten_england.156.t
	desc = bryten_england.156.desc
	theme = friendly
	override_background = { event_background = alley_day }
	
	right_portrait = root
	
	option = { # Ok
		name = bryten_england.156.home
	}

	after = {
		trigger_event = {
			id = bryten_england.157
			days = { 10 25 }
		}
	}

}
bryten_england.157 = {# Return home
	type = character_event
	title = bryten_england.157.t
	desc = bryten_england.157.desc
	theme = friendly
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = bryten_england.157.home
		add_piety = medium_piety_gain
		pilgrimage_additional_reward_effect = yes
		add_trait = pilgrim
	}
	
	after = {
		trigger_event = {
			id = bryten_england.158
			days = 1
		}
	}	
}
bryten_england.158 = {# Misc Cleanup file
	hidden = yes	
	immediate = {
		remove_character_flag = bryten_pilgrimage_durham
		scope:activity = {
			complete_activity = yes
		}
	}
}
