namespace = bryten_christian

##############################################
# Make vow to the Virigin Mary
##############################################
bryten_christian.001 = {# Make a vow to the Virign Mary
	type = character_event
	title = bryten_christian.001.t
	desc = bryten_christian.001.desc
	theme = faith
	override_background = { reference = temple_church }
	
	
	option = {# Go and make a vow
		name = bryten_christian.001.a
		hidden_effect = {
			trigger_event = {
				id = bryten_christian.002
				days = { 1 5 }
			}
		}	
	}
	option = {# Don't make a vow
		name = bryten_christian.001.b
		hidden_effect = {
			remove_character_flag = flag_bryten_took_mary_vow
		}
	}	

}
bryten_christian.002 = {# What sort of Vow do you make?
	type = character_event
	title = bryten_christian.002.t
	desc = bryten_christian.002.desc
	theme = faith
	override_background = { reference = temple_church }
	
	option = {# Vow to be Chaste and Virtuous
		name = bryten_christian.002.a
		hidden_effect = {
			add_character_flag = bryten_vow_chaste_flag
		}	
	}
	option = {# Vow to be Humble
		name = bryten_christian.002.b
		hidden_effect = {
			add_character_flag = bryten_vow_humble_flag
		}		
	}
	option = {# vow to be charitable
		name = bryten_christian.002.c
		hidden_effect = {
			add_character_flag = bryten_vow_charitable_flag
		}		
	}	
	option = {# Vow to be temperate
		name = bryten_christian.002.d
		hidden_effect = {
			add_character_flag = bryten_vow_temperate_flag
		}	
	}
}
bryten_christian.003 = {# Keeping vow after baby is born
	type = character_event
	title = bryten_christian.003.t
	desc = bryten_christian.003.desc
	theme = faith
	override_background = { reference = temple_church }
	
	option = {# Keep vow
		name = bryten_christian.003.a
		add_piety = minor_piety_gain
		if = {# Chaste Vow
			limit = { has_character_flag = bryten_vow_chaste_flag }
			add_character_modifier = {
				modifier = bryten_vow_chaste_modifier
				months = 2
			}
			stress_impact = {
				lustful = medium_stress_gain
				chaste = minor_stress_loss
				temperate = miniscule_stress_loss
				zealous = miniscule_stress_loss
				rakish = minor_stress_gain
			}
		}
		if = {# Humble Vow
			limit = { has_character_flag = bryten_vow_humble_flag }
			add_character_modifier = {
				modifier = bryten_vow_humble_modifier
				months = 2
			}
			stress_impact = {
				arrogant = medium_stress_gain
				humble = minor_stress_loss
				temperate = miniscule_stress_loss
				zealous = miniscule_stress_loss
			}
		}
		if = {# Charitable Vow
			limit = { has_character_flag = bryten_vow_charitable_flag }
			add_character_modifier = {
				modifier = bryten_vow_charitable_modifier
				months = 2
			}
			stress_impact = {
				greedy = minor_stress_gain
				generous = minor_stress_loss
				improvident = miniscule_stress_loss
				profligate = miniscule_stress_gain	
				zealous = miniscule_stress_loss			
			}
		}
		if = {# Temperate Vow
			limit = { has_character_flag = bryten_vow_temperate_flag }
			add_character_modifier = {
				modifier = bryten_vow_temperate_modifier
				months = 2
			}
			stress_impact = {
				gluttonous = minor_stress_gain
				temperate = minor_stress_loss
				drunkard = miniscule_stress_gain
				hashishiyah = miniscule_stress_gain	
				rakish = miniscule_stress_gain	
				zealous = miniscule_stress_loss
			}
		}
	}
	option = {# Don't Keep vow
		name = bryten_christian.003.b	
		add_piety = medium_piety_loss
		stress_impact = {
			honest = minor_stress_gain
			zealous = minor_stress_gain
			holy_warrior = minor_stress_gain
			faith_warrior = minor_stress_gain
			base = miniscule_stress_gain
		}
		hidden_effect = {
			if = {# always get this if your child is naturally born sickly
				limit = { has_character_flag = birth_child_will_become_sickly }
				add_character_flag = bryten_broke_virgin_vow_punishment_flag
			}			
			else_if = {# random chance for child to catch illness
				limit = { NOT = { has_character_flag = birth_child_will_become_sickly } }
				random_list = {
					70 = { }
					30 = { add_character_flag = bryten_broke_virgin_vow_punishment_flag }
				}
			}

		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = bryten_broke_virgin_vow_punishment_flag }
			trigger_event = {
				id = bryten_christian.004
				days = { 10 30 }
			}
		}
		remove_character_flag = bryten_vow_chaste_flag
		remove_character_flag = bryten_vow_humble_flag
		remove_character_flag = bryten_vow_charitable_flag
		remove_character_flag = bryten_vow_temperate_flag
		remove_character_flag = flag_bryten_took_mary_vow
	}

}
bryten_christian.004 = {# Breaking the Vow and bad stuff happens
	type = character_event
	title = bryten_christian.004.t
	desc = bryten_christian.004.desc
	theme = faith
	override_background = { reference = temple_church }
	
	immediate = {
		scope:child = {
			add_trait = sickly
		}
	}
	
	option = {# Virgin Mary please save me
		name = bryten_christian.004.a	
	}
	
	after = {# Maintance
		remove_character_flag = bryten_broke_virgin_vow_punishment_flag
	}

}
##############################################
# Laying in and Churching
##############################################
bryten_christian.005 = {# Laying In
	type = character_event
	title = bryten_christian.005.t
	desc = bryten_christian.005.desc
	theme = faith
	override_background = { reference = bedchamber }
	
	option = {# Begin Laying in.
		name = bryten_christian.005.a
		add_trait = bryten_laying_in
		hidden_effect = {
			trigger_event = {
				id = bryten_christian.006
				days = 40
			}
		}
	}
	
}
bryten_christian.006 = {# The Churching begins
	type = character_event
	title = bryten_christian.006.t
	desc = bryten_christian.006.desc
	theme = faith
	override_background = { reference = temple_church }
		
	immediate = {
		remove_trait = bryten_laying_in
	}
	
	option = {# The Laying in is over, the Churching begins
		name = bryten_christian.006.a	
	}

	after = {
		trigger_event = {
			id = bryten_christian.007
			days = { 1 2 }
		}
	}
}
bryten_christian.007 = {# The Blessing at the Church
	type = character_event
	title = bryten_christian.007.t
	desc = bryten_christian.007.desc
	theme = faith
	override_background = { reference = temple_church }
	
	
	immediate = {
		primary_partner = { save_scope_as = husband }
	}
	
	option = {# Thank God
		name = bryten_christian.007.a	
		add_piety = minor_piety_gain
	}
	
	after = {
		scope:husband = {
			trigger_event = {
				id = bryten_christian.008
				days = { 1 2 }
			}
		}
	}

}
bryten_christian.008 = {# Husband hears about the Churching
	type = character_event
	title = bryten_christian.008.t
	desc = bryten_christian.008.desc
	theme = faith
	override_background = { reference = temple_church }
	
	option = {# Thank God
		name = bryten_christian.008.a	
	}
	

}
##############################################
# Monastic Flavor
##############################################
bryten_christian.010 = {# Monks make fantastic beer
	type = character_event
	title = bryten_christian.010.t
	desc = bryten_christian.010.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}

	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = {# Visit the Monastary
		name = bryten_christian.010.a
		if = {
			limit = { NOT = { has_trait = drunkard } }
			random = {
				chance = 20
				add_trait = drunkard
				send_interface_toast = {
					type = event_toast_effect_bad
					title =  bryten_christian.010.a.drunkard 
					left_icon = root
				}
			}
		}
	}
	option = {# Thanks but No Thanks
		name = bryten_christian.010.b
		if = {
			limit = { NOT = { has_trait = temperate } }
			random = {
				chance = 20
				add_trait = temperate
				send_interface_toast = {
					type = event_toast_effect_good
					title =  bryten_christian.010.b.temperate
					left_icon = root
				}
			}
		}

	}

	after = {
		hidden_effect = {
			scope:monk = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}
bryten_christian.011 = {# Monks have healing herbs 
	type = character_event
	title = bryten_christian.011.t
	desc = bryten_christian.011.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}
	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		piety_level >= 1
		OR = {
			has_trait = ill
		}
		has_religion = religion:christianity_religion
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = {# Thank them
		name = bryten_christian.011.a
		ai_chance = {
			base = 80
		}
		random = {
			chance = 30
			remove_trait = ill
		}
	}
	option = {# These herbs smell funny
		name = bryten_christian.011.b
		if = {
			limit = { NOT = { has_trait = paranoid } }
			add_trait = paranoid
		}

	}

	after = {
		hidden_effect = {
			scope:monk = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}
bryten_christian.012 = {# Monks make great wine  
	type = character_event
	title = bryten_christian.012.t
	desc = bryten_christian.012.desc

	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}
	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = {# Visit the Monastary
		name = bryten_christian.012.a
		ai_chance = {
			base = 50
		}
		random = {
			chance = 50
			add_learning_skill = 1
		}
		if = {
			limit = { NOT = { has_trait = drunkard } }
			random = {
				chance = 20
				add_trait = drunkard
				send_interface_toast = {
					type = event_toast_effect_bad
					title = bryten_christian.012.a.drunkard
					left_icon = root
				}
			}
		}
	}
	option = {# Thanks but no Thanks
		name = bryten_christian.012.b
		ai_chance = {
			base = 50
		}
		if = {
			limit = { NOT = { has_trait = temperate } }
			random = {
				chance = 20
				add_trait = temperate
				send_interface_toast = {
					type = event_toast_effect_good
					title = bryten_christian.012.b.temperate
					left_icon = root
				}
			}
		}
	}

	after = {
		hidden_effect = {
			scope:monk = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}
bryten_christian.013 = {# Monk is fantastic painter 
	type = character_event
	title = bryten_christian.013.t
	desc = bryten_christian.013.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}
	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		NOT = { has_trait = blind }
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = {# Buy the Painting
		name = bryten_christian.013.a
		remove_short_term_gold = 10
		add_prestige = 30
	}
	option = {# very nice
		name = bryten_christian.013.b

	}

	after = {
		hidden_effect = {
			scope:monk = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}
bryten_christian.014 = {# Monks produce beautiful books 
	type = character_event
	title = bryten_christian.014.t
	desc = bryten_christian.014.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}

	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		NOT = { has_trait = blind }
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = {# I will buy the Book
		name = bryten_christian.014.a
		remove_short_term_gold = 30
		add_prestige = 30
		random = {
			chance = 20
			add_learning_skill = 1
		}
	}
	option = {# Books aren't for me
		name = bryten_christian.014.b

	}

	after = {
		hidden_effect = {
			scope:monk = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}
bryten_christian.015 = {# Local monks come to visit often 
	type = character_event
	title = bryten_christian.015.t
	desc = bryten_christian.015.desc

	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}
	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = {# Wonderful come again
		name = bryten_christian.015.a
		add_piety = 20
		random = {
			chance = 30
			add_learning_skill = 1
		}
	}
	option = {# the Monks are tedious
		name = bryten_christian.015.b
		random_list = {
			20 = {
				if = {
					limit = { NOT = { has_trait = cynical } }
					add_trait = cynical
				}
			}
			80 = {

			}
		}

	}

	after = {
		hidden_effect = {
			scope:monk = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}
bryten_christian.016 = {# Donate to local monastery
	type = character_event
	title = bryten_christian.016.t
	desc = bryten_christian.016.desc

	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:monk
		animation = happiness
	}
	trigger = {
		has_title = title:c_northumberland
		not = {	exists = global_var:bryten_monks_take_cuthbert } # Fire Only Once
		current_date <= 900.1.1 # The monks left in the 9th century
	}

	immediate = {
		create_character = {
			location = root.capital_province
			age = { 25 35 }
			gender = male
			trait = education_learning_3
			trait = devoted
			faith = root.faith
			culture = root.culture
			learning = { 10 12 }
			save_scope_as = monk
		}
	}
	
	option = { # Ok
		name = bryten_christian.016.a
	}
	option = { # Ok
		name = bryten_christian.016.b

	}

	after = {
		trigger_event = {
			id = bryten_england.141
			years = 7
		}
	}

}
bryten_christian.017 = {# Donate to local monastery 
	type = character_event
	title = bryten_christian.017.t
	desc = bryten_christian.017.desc

	theme = friendly
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:child_for_the_church
	}
	trigger = {
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		any_child = {
			is_ruler = no
			age >= 13
			NOT = { age >= 16 }
			NOT = { has_trait = cynical }
			NOT = { is_clergy = yes }
		}
	}

	immediate = {
		save_scope_as = parent_of_child
		random_child = {
			limit = {
				is_ruler = no
				age >= 13
				NOT = { age >= 16 }
				NOT = { has_trait = cynical }
				NOT = { is_clergy = yes }
			}
			save_scope_as = child_for_the_church
		}
	}
	
	option = { # Ok
		name = bryten_christian.017.a
		scope:child_for_the_church = {
			send_child_to_clergy_effect_for_events = yes

			if = {
				limit = {
					scope:parent_of_child.top_liege = {
						any_vassal_or_below = {
							has_government = theocracy_government
							primary_title.tier > tier_barony
							faith = scope:parent_of_child.faith
						}
					}
				}
				scope:parent_of_child.top_liege = {
					random_vassal_or_below = {
						limit = {
							has_government = theocracy_government
							primary_title.tier > tier_barony
							faith = scope:parent_of_child.faith
						}
						save_scope_as = theocratic_travel_target
					}
				}
				visit_court_of = scope:theocratic_travel_target
				set_relation_guardian = scope:theocratic_travel_target 
			}
			else_if = {
				limit = {
					exists = scope:parent_of_child.capital_province
				}
				move_to_pool_at = scope:parent_of_child.capital_province
			}

			add_opinion = {
				target = ROOT
				opinion = 50
				modifier = grateful_opinion
			}
		}
	}
	option = { # Ok
		name = bryten_christian.017.b
		scope:child_for_the_church = {
			add_stress = major_stress_loss
			add_opinion = {
				target = ROOT
				opinion = -150
				modifier = angry_opinion
			}
		}
	}
}

##############################################
# Bosnian Church orientation
##############################################
bryten_christian.020 = {# Bosnian Church orientation decision event
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_catholic
				}
				desc = bryten_christian.020.t.catholic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_orthodox
				}
				desc = bryten_christian.020.t.orthodox
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_gnostic
				}
				desc = bryten_christian.020.t.gnostic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_none
				}
				desc = bryten_christian.020.t.none
			}
			desc = bryten_christian.020.t.backup
		}
	}
	desc = {
		desc = bryten_christian.020.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_catholic
				}
				desc = bryten_christian.020.desc.catholic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_orthodox
				}
				desc = bryten_christian.020.desc.orthodox
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_gnostic
				}
				desc = bryten_christian.020.desc.gnostic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_none
				}
				desc = bryten_christian.020.desc.none
			}
		}
	}
	theme = faith

	right_portrait = {
		character = scope:sardinia_leader
		animation = war_over_win
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		if = {# Catholic
			limit = {
				has_global_variable = bryten_bosnian_church_orientation_catholic
			}
			bryten_bosnian_church_orientation_catholic_effects = yes
		}			
		else_if = {# Orthodox
			limit = {
				has_global_variable = bryten_bosnian_church_orientation_orthodox
			}
			bryten_bosnian_church_orientation_orthodox_effects = yes

		}			
		else_if = {# Orthodox
			limit = {
				has_global_variable = bryten_bosnian_church_orientation_gnostic
			}
			bryten_bosnian_church_orientation_gnostic_effects = yes

		}			
		else_if = {# None
			limit = {
				has_global_variable = bryten_bosnian_church_orientation_none
			}
			bryten_bosnian_church_orientation_none_effects = yes

		}			
	}
	
	option = {# Good
		name = bryten_christian.020.a
	}
	
	after = {
		hidden_effect = {
			every_player = {
				limit = { religion = religion:christianity_religion }
				trigger_event = { id = bryten_christian.021 }
			}
		}
	}
}
bryten_christian.021 = {# Bosnian orientation decision event
	type = character_event
	title = bryten_christian.021.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_catholic
				}
				desc = bryten_christian.021.desc.catholic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_orthodox
				}
				desc = bryten_christian.021.desc.orthodox
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_gnostic
				}
				desc = bryten_christian.021.desc.gnostic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = bryten_bosnian_church_orientation_none
				}
				desc = bryten_christian.021.desc.none
			}
		}
	}
	theme = faith

	right_portrait = {
		character = scope:sardinia_leader
		animation = thinking
	}

	# Latin
	option = {
		name = bryten_christian.021.a
	}




}
##############################################
# Confirmation
##############################################

##############################################
# Saintly Miracles
##############################################

##############################################
# Relic Events
##############################################

##############################################
# Bosation
##############################################

##############################################
# Bosnon
##############################################









