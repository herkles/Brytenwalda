#############################################
# Anglo-Saxon England Decisions
#############################################
unite_england_decision = {# Unite England
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 60
	desc = unite_england_decision_desc

	is_shown = {
		culture = { has_cultural_pillar = heritage_west_germanic }
		custom_tooltip = {
			text = capital_in_england_region_tooltip
			capital_province = { geographical_region = custom_england } 
		}
		NOT = {# this is a unique decision
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:unite_england_decision
			}
		}
		highest_held_title_tier < tier_empire # shouldn't be an Empire
		title:k_england = { is_title_created = no } #  England Can't exist 
	}

	is_valid = {
		custom_tooltip = {# Capital Must be in England
			text = capital_in_england_region_tooltip
			capital_province = { geographical_region = custom_england } 
		}
		custom_tooltip = {# Must own the majority of England
			text = owns_majority_england_region_tooltip
		 	any_county_in_region = {
		 		region = custom_england
		 		count >= 28
		 		OR = {
		 			holder = root
					 holder = {
						any_liege_or_above = { this = root }
					}
		 		}
		 	}
		}
		custom_tooltip = {# Must be of West Germanic heritage
			text = unite_england_culture_requirement
			culture = { has_cultural_pillar = heritage_west_germanic }
		}
		custom_tooltip = {# Must have an English Kingdom as primary title
			text = unite_england_decision_primary
			OR = {
				has_primary_title = title:k_kent
				has_primary_title = title:k_northumbria
				has_primary_title = title:k_east_anglia
				has_primary_title = title:k_mercia
				has_primary_title = title:k_wessex
				has_primary_title = title:k_essex
			}
		}
	}

	effect = {
		save_scope_as = england_kingdom_uniter
		show_as_tooltip = { unite_kingdom_england_decision_effects = yes } 
		hidden_effect = {# adding the variables for unique COAs variants
			if = {# set unique COA for england united by Mercia
				limit = { has_primary_title = title:k_mercia }
				set_global_variable = {
					name = england_coa_merica
					value = yes
				}
			}
			if = {# set unique COA for england united by Northumbria
				limit = { has_primary_title = title:k_northumbria }
				set_global_variable = {
					name = england_coa_northumbria
					value = yes
				}
			}
			if = {# set unique COA for england united by East Anglia
				limit = { has_primary_title = title:k_east_anglia }
				set_global_variable = {
					name = england_coa_east_anglia
					value = yes
				}
			}
			if = {# set unique COA for england united by kent
				limit = { has_primary_title = title:k_kent }
				set_global_variable = {
					name = england_coa_kent
					value = yes
				}
			}
			
		}
		#Events
		trigger_event = bryten_decision.0001
		every_player = {
			limit = {
				NOT = { this = scope:england_kingdom_uniter }
				is_within_diplo_range = { CHARACTER = scope:england_kingdom_uniter }
			}
			trigger_event = bryten_decision.0002
		}
		#Can only be done once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:unite_england_decision
		}
		set_global_variable = {
			name = unavailable_unique_decisions
			value = scope:england_kingdom_uniter
		}

	}

	ai_potential = {
		always = yes
	}

	ai_will_do = { base = 100 }
}
restore_kingdom_kent_decision = {# Restore the Kingdom of Kent
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 120

	desc = restore_kingdom_kent_decision_desc
	selection_tooltip = restore_kingdom_kent_decision_tooltip

	is_shown = {
		NOR = {# can't form it if you are already a king, nor should the house of wessex be able to do so
			title:k_england = { is_title_created = yes } # If England is created then you should focus on that
			highest_held_title_tier >= tier_kingdom # No point in restoring it if you are already a king
		}
		culture = { has_cultural_pillar = heritage_west_germanic }
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:restore_kingdom_kent
			}
		}
		custom_tooltip = {
			text = capital_in_england_region_tooltip
			capital_province = { geographical_region = custom_england } 
		}

	}

	is_valid = {
		custom_tooltip = {
			text = capital_in_england_region_tooltip
			capital_province = { geographical_region = custom_england } 
		}
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		root.faith = faith:catholic # Due to it being an important seat, the people won't accept you without you being catholic. 
		completely_controls = title:d_canterbury
		custom_tooltip = {
			text = unite_england_culture_requirement
			culture = { has_cultural_pillar = heritage_west_germanic }
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {
			restore_kingdom_kent_decision_scripted_effect = yes
		}
		save_scope_as = kent_restorer
		trigger_event = {
			id = bryten_decision.0004
		}
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = root }
				is_within_diplo_range = { CHARACTER = root }
			}
			trigger_event = bryten_decision.0005
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:restore_kingdom_kent
			}
		}
	}

	cost = {
		gold = 300
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
restore_kingdom_essex_decision = {# Restore the Kingdom of Essex
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 120

	desc = restore_kingdom_essex_decision_desc
	selection_tooltip = restore_kingdom_essex_decision_tooltip

	is_shown = {
		NOR = {# can't form it if you are already a king, nor should the house of wessex be able to do so
			title:k_england = { is_title_created = yes } # If England is created then you should focus on that
			highest_held_title_tier >= tier_kingdom # No point in restoring it if you are already a king
		}
		culture = { has_cultural_pillar = heritage_west_germanic }
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:restore_kingdom_essex
			}
		}
		custom_tooltip = {
			text = capital_in_england_region_tooltip
			capital_province = { geographical_region = custom_england } 

		}
	}

	is_valid = {
		root.faith = faith:catholic # Due to it being an important seat, the people won't accept you without you being catholic. 
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		completely_controls = title:d_bedford
		root.faith = faith:catholic
		custom_tooltip = {
			text = unite_england_culture_requirement
			culture = { has_cultural_pillar = heritage_west_germanic }
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {
			restore_kingdom_essex_decision_scripted_effect = yes
		}
		save_scope_as = essex_restorer
		trigger_event = {
			id = bryten_decision.0006
		}
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = root }
				is_within_diplo_range = { CHARACTER = root }
			}
			trigger_event = bryten_decision.0007
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:restore_kingdom_essex
			}
		}
	}

	cost = {
		gold = 300
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
bryten_promote_pilgrimage_cantebury = {# Promote Pilgrimage to Cantebury
	picture = "gfx/interface/illustrations/decisions/decision_christian_pilgrimage.dds"
	ai_check_interval = 64
	cooldown = { days = 7300 }
	desc = bryten_promote_pilgrimage_cantebury_desc
	major = yes

	is_shown = {
		completely_controls = title:d_canterbury
		is_ruler = yes
		is_landed = yes
		capital_province = { geographical_region = world_europe_west_britannia } 
		# The Pope Must exist
		exists = faith.religious_head
		root.faith = faith:catholic
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_canterbury_pilgrimage_promoted
			}
		}
		# Check to make sure that Thomas Becket isn't sainted
		NOT = { has_global_variable = thomas_becket_sainted }
		OR = {# Has to be Anglo-Saxon Cultures
			has_culture = culture:anglo_saxon
			has_culture = culture:anglo_norse
			has_culture = culture:northumbrian
			has_culture = culture:mercian
			has_culture = culture:west_saxon
			has_culture = culture:east_anglian
		}
	}
	
	is_valid = {
		piety_level >= 4
		prestige_level >= 2
		culture = {	has_innovation = innovation_divine_right }
		gold >= medium_gold_value
		faith.religious_head = {# the Pope must like you
			opinion = {
				target = root
				value >= very_high_positive_opinion
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		save_scope_as = english_king
		faith.religious_head = {# the Pope must like you
			save_scope_as = pope
		}
		custom_tooltip = bryten_promote_pilgrimage_cantebury_tooltip
		trigger_event = { id = bryten_england.175 }
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_canterbury_pilgrimage_promoted
			}
		}
	}

	cost = { 
		gold = { value = medium_gold_value } # Will depend
	}	

	ai_potential = {
		short_term_gold > standard_activity_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 5
			has_trait = zealous
		}
		modifier = {
			add = -15
			has_trait = cynical
		}
	}
}
#############################################
# Anglo-Norse England Decisions
#############################################

#############################################
# Norman England Decisions
#############################################

#############################################
# General England Decisions
#############################################
bryten_build_saint_edmunds = {# Build the Abbey of Saint Edmunds
	picture = "gfx/interface/illustrations/decisions/decision_gothic.dds"
	ai_check_interval = 64
	cooldown = { days = 7300 }
	desc = bryten_build_saint_edmunds_desc
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		religion = religion:christianity_religion
		NOT = { has_character_flag = bryten_bury_saint_edmunds }
		exists = global_var:bryten_saint_edmund_cult
		capital_province = { geographical_region = world_europe_west_britannia } 
	}
	
	is_valid = {
		culture = {	has_innovation = innovation_manorialism	}
		gold >= medium_gold_value
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		custom_tooltip = bryten_build_saint_edmunds_tooltip
		trigger_event = { id = bryten_england.128 }
	}

	cost = { 
		gold = { value = medium_gold_value } # Will depend
	}	

	ai_potential = {
		short_term_gold > standard_activity_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 5
			has_trait = zealous
		}
		modifier = {
			add = -15
			has_trait = cynical
		}
	}
}
TFE_consecrate_holy_well = {# Consencrate a Holy Well
	picture = "gfx/interface/illustrations/decisions/decision_christian_pilgrimage.dds"
	ai_check_interval = 64
	desc = TFE_consecrate_holy_well_desc
	
	is_shown = {
		is_landed = yes
		NOT = {
			any_directly_owned_province = {
				county = {
					OR = {
						has_county_modifier = TFE_holy_well_level_1
						has_county_modifier = TFE_holy_well_level_2
						has_county_modifier = TFE_holy_well_level_3
					}
				}
			}
		}
		culture = {
			OR = {
				has_cultural_pillar = heritage_west_germanic
				has_cultural_pillar = heritage_brythonic
				has_cultural_pillar = heritage_goidelic
			}
		}
	}
	
	is_valid = {	
		culture = {
			OR = {
				has_cultural_pillar = heritage_west_germanic
				has_cultural_pillar = heritage_brythonic
				has_cultural_pillar = heritage_goidelic
			}
		}
		custom_tooltip = {
			text = TFE_no_holy_well_county
			NOT = {
				any_directly_owned_province = {
					county = {
						OR = {
							has_county_modifier = TFE_holy_well_level_1
							has_county_modifier = TFE_holy_well_level_2
							has_county_modifier = TFE_holy_well_level_3
						}
					}
				}
			}	
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	cost = {
		gold = bryten_activity_cost
		prestige = medium_prestige_value
	}

	effect = {

		custom_tooltip = TFE_consecrate_holy_well_effect_tooltip_1
		custom_tooltip = TFE_consecrate_holy_well_effect_tooltip_2
		custom_tooltip = TFE_consecrate_holy_well_effect_tooltip_3

		trigger_event = { id = bryten_decision.0014	}
	}

	ai_potential = {
		short_term_gold >= bryten_activity_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 10
			has_trait = zealous
		}
		modifier = {
			add = -10
			has_trait = cynical
		}
		modifier = {
			add = 10
			has_trait = ambitious
		}
		modifier = {
			add = -10
			has_trait = lazy
		}
	}
}
TFE_visit_holy_well = {# Visit a Holy Well
	picture = "gfx/interface/illustrations/decisions/decision_christian_pilgrimage.dds"

	ai_check_interval = 64

	cooldown = { days = 3650 } #1825
	
	desc = TFE_visit_holy_well_desc
	
	is_shown = {
		is_landed = yes
		any_directly_owned_province = {
			county = {
				OR = {
					has_county_modifier = TFE_holy_well_level_1
					has_county_modifier = TFE_holy_well_level_2
					has_county_modifier = TFE_holy_well_level_3
				}
			}
		}
		culture = {
			OR = {
				has_cultural_pillar = heritage_west_germanic
				has_cultural_pillar = heritage_brythonic
				has_cultural_pillar = heritage_goidelic
			}
		}
		NOT = {
			any_owned_story = {
				story_type = story_TFE_visit_holy_well
			}
		}
	}
	
	is_valid = {
		culture = {
			OR = {
				has_cultural_pillar = heritage_west_germanic
				has_cultural_pillar = heritage_brythonic
				has_cultural_pillar = heritage_goidelic
			}
		}
		custom_tooltip = {
			text = TFE_yes_holy_well_county
			any_directly_owned_province = {
				county = {
					OR = {
						has_county_modifier = TFE_holy_well_level_1
						has_county_modifier = TFE_holy_well_level_2
						has_county_modifier = TFE_holy_well_level_3
					}
				}
			}	
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	cost = {
		gold = bryten_activity_cost
	}

	effect = {

		custom_tooltip = TFE_visit_holy_well_effect_tooltip_1
		custom_tooltip = TFE_visit_holy_well_effect_tooltip_2

		add_character_flag = planning_an_activity
		if = {
			limit = {
				any_directly_owned_province = {
					county = {
						has_county_modifier = TFE_holy_well_level_3
					}
				}
			}			
			random_directly_owned_province = {
				limit = {
					county = {
						has_county_modifier = TFE_holy_well_level_3
					}
				}
				county = {
					root = {
						set_variable = {
							name = county_well
							value = PREV
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				any_directly_owned_province = {
					county = {
						has_county_modifier = TFE_holy_well_level_2
					}
				}
			}			
			random_directly_owned_province = {
				limit = {
					county = {
						has_county_modifier = TFE_holy_well_level_2
					}
				}
				county = {
					root = {
						set_variable = {
							name = county_well
							value = PREV
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				any_directly_owned_province = {
					county = {
						has_county_modifier = TFE_holy_well_level_1
					}
				}
			}			
			random_directly_owned_province = {
				limit = {
					county = {
						has_county_modifier = TFE_holy_well_level_1
					}
				}
				county = {
					root = {
						set_variable = {
							name = county_well
							value = PREV
						}
					}
				}
			}
		}
		# Failsafe in case there's no appropriate county
		else = {
			root = {
				set_variable = {
					name = county_well
					value = capital_county
				}
			}
		}
		create_story = story_TFE_visit_holy_well
	}

	ai_potential = {
		short_term_gold >= 50
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 10
			has_trait = zealous
		}
		modifier = {
			add = -10
			has_trait = cynical
		}
		modifier = {
			add = 10
			has_trait = diligent
		}
		modifier = {
			add = -10
			has_trait = lazy
		}
	}
}
bryten_cinque_ports_exempt_tax = {# Set up the Cinque ports
	picture = "gfx/interface/illustrations/decisions/decision_european_port.dds"
	ai_check_interval = 64
	cooldown = { days = 3650 }
	desc = bryten_cinque_ports_exempt_tax_desc
	
	is_shown = {
		has_title = title:k_england
		is_landed = yes
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
		}
		NOT = { exists = global_var:bryten_cinque_ports_established	}
	}
	
	is_valid = {
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
		}
		OR = {
			prestige_level >= 2
			highest_held_title_tier >= tier_kingdom
		}
		culture = {	has_innovation = innovation_development_02 }
	}
	
	is_valid_showing_failures_only = { is_available_adult = yes }

	effect = {
		show_as_tooltip = {	bryten_establish_cinque_ports_effect = yes	}
		trigger_event = { id = bryten_england.200 }
	}

	cost = { prestige = { value = major_prestige_value } }	
	ai_potential = { prestige > major_prestige_value }

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = arbitrary
		}
		modifier = {
			add = 8
			has_trait = just
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}
#############################################
# Irish Decisions
#############################################
strengthen_high_kingship_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_high_king.dds"
	major = yes
	ai_check_interval = 60
	desc = strengthen_high_kingship_decision_desc

	is_shown = {
		culture = { has_cultural_pillar = heritage_goidelic }# Must be a Gael to do this
		NOT = {# this is a unique decision
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:strengthen_high_kingship_decision
			}
		}
		has_primary_title = title:k_ireland_titular # You must be the High King to do this.
	}

	is_valid = {
		is_independent_ruler = yes # You only owe alligance to God!
		prestige_level >= high_prestige_level # You need to prove your prestige that you are worthy of the title
		completely_controls_region = custom_roman_hibernia
		title:k_ireland_titular = { title_held_years >= 30 }
	}

	effect = {
		save_scope_as = high_king_ireland

		show_as_tooltip = { strengthen_high_king_decision_effects = yes } 
		#Events
		trigger_event = bryten_decision.0008
		every_player = {
			limit = {
				NOT = { this = scope:high_king_ireland }
				is_within_diplo_range = { CHARACTER = scope:high_king_ireland }
			}
			trigger_event = bryten_decision.0009
		}
		#Can only be done once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:strengthen_high_kingship_decision
		}
		set_global_variable = {
			name = unavailable_unique_decisions
			value = scope:high_king_ireland
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
#############################################
# Scottish Decisions
#############################################
integrate_strathclyde_kingdom = {# Integrate the Kingdom of Strathclyde
	picture = "gfx/interface/illustrations/decisions/decision_knight_kneeling.dds"
	ai_check_interval = 60
	major = yes
	desc = integrate_strathclyde_kingdom_desc

	is_shown = {
		NOT = {# this is a unique decision
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_strathclyde_kingdom
			}
		}
		has_primary_title = title:k_scotland # Only can be done as the Kingdom of Scotland
		NOT = {
			culture:cumbrian = {
				has_innovation = innovation_rightful_ownership
			}
		}
	}

	is_valid = {
		root.culture = {
			has_innovation = innovation_hereditary_rule
			has_innovation = innovation_royal_prerogative
		}
		NOT = { culture:cumbrian = { has_innovation = innovation_rightful_ownership	} }
		completely_controls = title:k_strathclyde
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	effect = {
		save_scope_as = scottish_king_strathclyde
		show_as_tooltip = {
			integrate_strathclyde_kingdom_effect = yes
		}
		trigger_event = {
			id = bryten_decision.0010
		}
		every_player = {
			limit = {
				NOT = { this = scope:scottish_king_strathclyde }
				is_within_diplo_range = { CHARACTER = scope:scottish_king_strathclyde }
			}
			trigger_event = bryten_decision.0011
		}
		#Can only be done once
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_strathclyde_kingdom
			}
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
create_duchy_of_lothian = {# Create the Duchy of Lothian
	picture = "gfx/interface/illustrations/decisions/decision_knight_kneeling.dds"
	ai_check_interval = 60
	desc = create_duchy_of_lothian_desc

	is_shown = {
		NOT = {# this is a unique decision
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_duchy_of_lothian
			}
		}
		OR = {# should either be Scotland or Strathclyde that creates it
			has_primary_title = title:k_scotland
			has_primary_title = title:k_strathclyde
		}
		title:d_lothian = { is_title_created = no } #  Lothian can't already exist  
		NOT = {# Anglo-Saxon's don't get this decision due to Brambugh being an anglo-saxon title
			has_culture = culture:anglo_saxon
		}
	}

	is_valid = {
		custom_tooltip = {
			text = create_lothian_land_requirement		
			AND = {# Must control Lothian
				completely_controls = title:c_lothian
				completely_controls = title:c_dunbar
				completely_controls = title:c_teviotdale
				completely_controls = title:c_linlithgowshire
				completely_controls = title:c_lanarkshire
			}

		}
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	effect = {
		save_scope_as = lothian_duchy_creator

		show_as_tooltip = { create_lothian_duchy_effects = yes } 
		create_lothian_duchy_effects = yes
		#Can only be done once
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_duchy_of_lothian
			}
		}

	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
bryten_saint_andrew_routes_decision = {# Support the Way of Saint Andrew in Scotland
	picture = "gfx/interface/illustrations/decisions/decision_christian_pilgrimage.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					religion = religion:christianity_religion
				}
				desc = bryten_saint_andrew_routes_decision_desc
			}
			triggered_desc = {
				trigger = {
					OR = {
						NOT = { religion = religion:christianity_religion }
					}
				}
				desc = bryten_saint_andrew_routes_decision_nonchristian_desc
			}
		}
	}
	ai_check_interval = 40
	
	cooldown = { days = bryten_way_of_saint_andrew_decisions_cooldown_time }

	is_shown = {
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {	geographical_region = custom_scotland_st_andrew_way	}
		}
		OR = {
			religion = religion:christianity_religion
			any_held_title = {
				tier = tier_county
				religion = religion:christianity_religion	
				any_county_province = {	geographical_region = custom_scotland_st_andrew_way	}
			}
		}
	}

	is_valid = {
		custom_tooltip = {
			text = bryten_saint_andrew_geographical_req
			any_held_title = {
				tier = tier_county
				any_county_province = {	geographical_region = custom_scotland_st_andrew_way	}
			}
		}
		OR = {
			religion = religion:christianity_religion
			custom_tooltip = {
				text = bryten_saint_andrew_geographical_christian_county_req
				any_held_title = {
					tier = tier_county
					religion = religion:christianity_religion
					any_county_province = {	geographical_region = custom_scotland_st_andrew_way	}
				}
			}
		}
		NOR = {
			has_character_modifier = bryten_way_of_saint_andrew_supporter
		}

	}

	is_valid_showing_failures_only = {
		is_adult = yes
		bryten_basic_is_available_adult_courtier_even_if_sick_trigger = yes
	}

	cost = { gold = { value = bryten_saint_andrew_decision_cost_value } }
	
	ai_potential = { short_term_gold > bryten_saint_andrew_decision_cost_value }

	effect = {
		show_as_tooltip = {
			if = {
				limit = { religion = religion:christianity_religion	}
				add_piety = bryten_saint_andrew_help_piety_reward_value
			}
			else = { add_prestige = bryten_saint_andrew_help_prestige_reward_value }
		}
		if = {
			limit = { religion = religion:christianity_religion }
			custom_tooltip = bryten_saint_andrew_routes_decision_effect_tooltip_1
			add_character_modifier = {
				modifier = bryten_way_of_saint_andrew_supporter
				years = 10
			}
		}
		else = {
			custom_tooltip = bryten_saint_andrew_routes_decision_effect_tooltip_2
			add_character_modifier = {
				modifier = bryten_way_of_saint_andrew_supporter_nonchristian
				years = 10
			}
		}
		show_as_tooltip = {
			if = {
				limit = { religion = religion:christianity_religion	}
				random_list = {
					desc = bryten_saint_andrew_routes_decision_tt
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.close
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.close.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.midrange.high
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.midrange.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.distant.high
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.distant.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.midrange.low
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.midrange.low.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.distant.low
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.distant.low.tooltip
					}
				}
			}
			else = {
				random_list = {
					desc = bryten_saint_andrew_routes_decision_non_christian_tt
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.close
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.close.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.midrange.high
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.midrange.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.distant.high
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.distant.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.midrange.low
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.midrange.low.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_andrew_routes_decision_counties.distant.low
						custom_tooltip = bryten_saint_andrew_routes_decision_counties.distant.low.tooltip
					}
				}
			}
		}		
		trigger_event = { id = bryten_scotland.010	}
	}

	ai_will_do = {
		base = 25
		modifier = {
			add = -10
			has_trait = cynical
		}
		modifier = {
			add = 10
			has_trait = zealous
		}
		modifier = {
			add = -10
			has_trait = greedy
		}
		modifier = {
			add = 10
			has_trait = generous
		}
	}
}
#############################################
# Italian Decisions
#############################################
embrace_tuscan_culture_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_tuscan.dds"
	major = yes

	ai_check_interval = 36

	desc = embrace_tuscan_culture_decision_desc

	is_shown = {
		is_landed = yes
		culture = { has_cultural_pillar = heritage_latin }
		OR = {# has to have a center of tuscan culture, pisa, florence, or Siena	
			title:k_pisa = {
				any_in_de_jure_hierarchy = {
					root.primary_title = this
				}
			}
			title:c_siena = {
				any_in_de_jure_hierarchy = {
					root.primary_title = this
				}
			}
			title:c_firenze = {
				any_in_de_jure_hierarchy = {
					root.primary_title = this
				}
			}
			OR = {
				highest_held_title_tier = tier_duchy
				highest_held_title_tier = tier_kingdom
			}
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:embrace_tuscan_culture_decision
			}
		}
		NOT = { game_start_date >= 1066.09.15 } # it already happened
		current_date > 950.1.1 # after 950
	}

	is_valid = {
		culture = { has_cultural_pillar = heritage_latin }
		capital_county.duchy = title:d_toscana # needs to be in Tuscany
		OR = {# has to have a center of tuscan culture, pisa, florence, or Siena
			title:k_pisa = { title_held_years >= 30 }
			title:c_siena = { title_held_years >= 30 }
			title:c_firenze = { title_held_years >= 30 }
		}
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:embrace_tuscan_culture_decision
		}
		show_as_tooltip = {	embrace_tuscan_culture_effect = yes	}

		trigger_event = tapestry_italian.001
	}
	
	ai_potential = {
		is_landed = yes
		culture = { has_cultural_pillar = heritage_latin }
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:embrace_english_culture_decision
			}
		}
	}

	ai_will_do = {
		base = 80
		modifier = {# Republics are much more likely to embrace
			add = 20
			government_has_flag = government_is_republic
		}
	}
}
#############################################
# French Decisions
#############################################
bryten_cluny_abbey_donation = {# Donate to the Abbey of Cluny
	picture = "gfx/interface/illustrations/decisions/decision_gothic.dds"
	ai_check_interval = 64

	cooldown = { days = 5475 }
	
	desc = bryten_cluny_abbey_donation_desc
	
	is_shown = {
		is_landed = yes	
		highest_held_title_tier >= tier_kingdom
		root.faith = faith:catholic
		custom_tooltip = {
			text = bryten_cluny_must_be_built
			title:b_cluny.title_province = { has_special_building = yes }
		}
		capital_province = {# should be in Western Europe
			OR = {
				geographical_region = world_europe_west_britannia
				geographical_region = world_europe_north
				geographical_region = world_europe_west_francia
				geographical_region = custom_frisia
			}
		}
	}
	
	is_valid = {
		root.faith = faith:catholic
		gold >= 40
		custom_tooltip = {
			text = bryten_cluny_must_be_built
			title:b_cluny.title_province = { has_special_building = yes }
		}
		capital_province = {# should be in Western Europe
			OR = {
				geographical_region = world_europe_west_britannia
				geographical_region = world_europe_north
				geographical_region = world_europe_west_francia
				geographical_region = custom_frisia
			}
		}
	}

	is_valid_showing_failures_only = {
		bryten_basic_is_available_adult_trigger = yes
	}

	effect = {
		hidden_effect = {
			title:c_macon = { save_scope_as = cluny_county }
		}
		custom_tooltip = bryten_cluny_abbey_donation_effect_tooltip_1	
		trigger_event = { id = tapestry_french.002	}
	}

	ai_potential = {
		short_term_gold >= 50
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 10
			has_trait = ambitious
		}
		modifier = {
			add = -10
			has_trait = lazy
		}
		modifier = {
			add = 10
			has_trait = generous
		}
		modifier = {
			add = -10
			has_trait = greedy
		}
		modifier = {
			add = 25
			has_trait = zealous
		}
		modifier = {
			add = -25
			has_trait = cynical
		}
	}
}
#############################################
# Norse Decisions
#############################################
consecrate_sacred_grove = {# Consencrate a Sacred Grove
	picture = "gfx/interface/illustrations/decisions/decision_sacred_grove.dds"
	ai_check_interval = 64
	desc = consecrate_sacred_grove_desc
	
	is_shown = {
		is_landed = yes
		NOT = {
			any_directly_owned_province = {
				county = {
					OR = {
						has_county_modifier = sacred_grove_level_1
						has_county_modifier = sacred_grove_level_2
						has_county_modifier = sacred_grove_level_3
					}
				}
			}
		}
		OR = {
			religion = religion:germanic_religion
			religion = religion:finno_ugric_religion
			religion = religion:slavic_religion
			religion = religion:baltic_religion
		}	
	}
	
	is_valid = {
		OR = {
			religion = religion:germanic_religion
			religion = religion:finno_ugric_religion
			religion = religion:slavic_religion
			religion = religion:baltic_religion
		}
		custom_tooltip = {
			text = no_sacred_grove_county
			trigger_if = {
				NOT = {
					any_directly_owned_province = {
						county = {
							OR = {
								has_county_modifier = sacred_grove_level_1
								has_county_modifier = sacred_grove_level_2
								has_county_modifier = sacred_grove_level_3
							}
						}
					}
				}
			}	
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	cost = {
		gold = bryten_activity_cost
		prestige = medium_prestige_value
	}

	effect = {

		custom_tooltip = consecrate_sacred_grove_effect_tooltip_1
		custom_tooltip = consecrate_sacred_grove_effect_tooltip_2
		custom_tooltip = consecrate_sacred_grove_effect_tooltip_3

		trigger_event = { id = bryten_decision.0016	}
	}

	ai_potential = {
		short_term_gold >= bryten_activity_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 10
			has_trait = zealous
		}
		modifier = {
			add = -10
			has_trait = cynical
		}
		modifier = {
			add = 10
			has_trait = ambitious
		}
		modifier = {
			add = -10
			has_trait = lazy
		}
	}
}
vist_sacred_grove = {# Visit a Sacred Grove
	picture = "gfx/interface/illustrations/decisions/decision_sacred_grove.dds"

	ai_check_interval = 64

	cooldown = { days = 3650 } #1825
	
	desc = vist_sacred_grove_desc
	
	is_shown = {
		is_landed = yes
		any_directly_owned_province = {
			county = {
				OR = {
					has_county_modifier = sacred_grove_level_1
					has_county_modifier = sacred_grove_level_2
					has_county_modifier = sacred_grove_level_3
				}
			}
		}
		OR = {
			religion = religion:germanic_religion
			religion = religion:finno_ugric_religion
			religion = religion:slavic_religion
			religion = religion:baltic_religion
		}
		NOT = {
			any_owned_story = {
				story_type = story_visit_sacred_grove
			}
		}
	}
	
	is_valid = {
		OR = {
			religion = religion:germanic_religion
			religion = religion:finno_ugric_religion
			religion = religion:slavic_religion
			religion = religion:baltic_religion
		}
		custom_tooltip = {
			text = yes_sacred_grove_county
			trigger_if = {
				any_directly_owned_province = {
					county = {
						OR = {
							has_county_modifier = sacred_grove_level_1
							has_county_modifier = sacred_grove_level_2
							has_county_modifier = sacred_grove_level_3
						}
					}
				}
			}		
	
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	cost = {
		gold = bryten_activity_cost
	}

	effect = {

		custom_tooltip = vist_sacred_grove_tooltip

		add_character_flag = planning_an_activity
		if = {
			limit = {
				any_directly_owned_province = {
					county = {
						has_county_modifier = sacred_grove_level_3
					}
				}
			}			
			random_directly_owned_province = {
				limit = {
					county = {
						has_county_modifier = sacred_grove_level_3
					}
				}
				county = {
					root = {
						set_variable = {
							name = county_grove
							value = PREV
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				any_directly_owned_province = {
					county = {
						has_county_modifier = sacred_grove_level_2
					}
				}
			}			
			random_directly_owned_province = {
				limit = {
					county = {
						has_county_modifier = sacred_grove_level_2
					}
				}
				county = {
					root = {
						set_variable = {
							name = county_grove
							value = PREV
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				any_directly_owned_province = {
					county = {
						has_county_modifier = sacred_grove_level_1
					}
				}
			}			
			random_directly_owned_province = {
				limit = {
					county = {
						has_county_modifier = sacred_grove_level_1
					}
				}
				county = {
					root = {
						set_variable = {
							name = county_grove
							value = PREV
						}
					}
				}
			}
		}
		# Failsafe in case there's no appropriate county
		else = {
			root = {
				set_variable = {
					name = county_grove
					value = capital_county
				}
			}
		}
		create_story = story_visit_sacred_grove
	}

	ai_potential = {
		short_term_gold >= 50
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 10
			has_trait = zealous
		}
		modifier = {
			add = -10
			has_trait = cynical
		}
		modifier = {
			add = 10
			has_trait = diligent
		}
		modifier = {
			add = -10
			has_trait = lazy
		}
	}
}
create_kingdom_gotaland_decision = {# Create the Kingdom of Gotaland
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 120

	desc = create_kingdom_gotaland_decision_desc
	selection_tooltip = create_kingdom_gotaland_decision_tooltip

	is_shown = {
		has_culture = culture:gaet # has to be a geat
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_gotaland_kingdom
			}
		}
		NOT = { highest_held_title_tier >= tier_kingdom }
		custom_tooltip = {
			text = capital_in_gothaland_region_tooltip
			capital_province = { geographical_region = custom_gaetland } 
		}

	}

	is_valid = {
		custom_tooltip = {
			text = capital_in_gothaland_region_tooltip
			capital_province = { geographical_region = custom_gaetland } 
		}
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		completely_controls = title:d_vastergotland
		completely_controls = title:d_ostergotland
		completely_controls = title:d_smaland
		has_culture = culture:gaet
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {
			create_kingdom_gotland_decision_scripted_effect = yes
		}
		save_scope_as = gotaland_creator
		trigger_event = { id = bryten_decision.0018 }
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = root }
				is_within_diplo_range = { CHARACTER = root }
			}
			trigger_event = bryten_decision.0019
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_gotaland_kingdom
			}
		}
	}

	cost = {
		gold = 300
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
bryten_saint_olaf_routes_decision = {# Support the Way of Saint Olaf in Scandinavia
	picture = "gfx/interface/illustrations/decisions/decision_christian_pilgrimage.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {	religion = religion:christianity_religion }
				desc = bryten_saint_olaf_routes_decision_desc
			}
			triggered_desc = {
				trigger = {	NOT = { religion = religion:christianity_religion }	}
				desc = bryten_saint_olaf_routes_decision_nonchristian_desc
			}
		}
	}
	ai_check_interval = 40
	
	cooldown = { days = bryten_way_of_saint_andrew_decisions_cooldown_time }

	is_shown = {
		NOT = { game_start_date >= 1028.01.01 } # The end of Olaf's reign
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {	geographical_region = custom_scotland_st_olaf_way	}
		}
		OR = {
			religion = religion:christianity_religion
			any_held_title = {
				tier = tier_county
				religion = religion:christianity_religion	
				any_county_province = {	geographical_region = custom_scotland_st_olaf_way	}
			}
		}
	}

	is_valid = {
		custom_tooltip = {
			text = bryten_saint_olaf_geographical_req
			any_held_title = {
				tier = tier_county
				any_county_province = {	geographical_region = custom_scotland_st_olaf_way	}
			}
		}
		OR = {
			religion = religion:christianity_religion
			custom_tooltip = {
				text = bryten_saint_olaf_geographical_christian_county_req
				any_held_title = {
					tier = tier_county
					religion = religion:christianity_religion
					any_county_province = {	geographical_region = custom_scotland_st_olaf_way	}
				}
			}
		}
		NOT = {	has_character_modifier = bryten_way_of_saint_olaf_supporter }

	}

	is_valid_showing_failures_only = {
		is_adult = yes
		bryten_basic_is_available_adult_courtier_even_if_sick_trigger = yes
	}

	cost = { gold = { value = bryten_saint_andrew_decision_cost_value } }
	
	ai_potential = { short_term_gold > bryten_saint_andrew_decision_cost_value }

	effect = {
		show_as_tooltip = {
			if = {
				limit = { religion = religion:christianity_religion	}
				add_piety = bryten_saint_andrew_help_piety_reward_value
			}
			else = { add_prestige = bryten_saint_andrew_help_prestige_reward_value }
		}
		if = {
			limit = { religion = religion:christianity_religion }
			custom_tooltip = bryten_saint_olaf_routes_decision_effect_tooltip_1
			add_character_modifier = {
				modifier = bryten_way_of_saint_olaf_supporter
				years = 10
			}
		}
		else = {
			custom_tooltip = bryten_saint_olaf_routes_decision_effect_tooltip_2
			add_character_modifier = {
				modifier = bryten_way_of_saint_olaf_supporter_nonchristian
				years = 10
			}
		}
		show_as_tooltip = {
			if = {
				limit = { religion = religion:christianity_religion	}
				random_list = {
					desc = bryten_saint_olaf_routes_decision_tt
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.close
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.close.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.midrange.high
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.midrange.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.distant.high
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.distant.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.midrange.low
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.midrange.low.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.distant.low
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.distant.low.tooltip
					}
				}
			}
			else = {
				random_list = {
					desc = bryten_saint_olaf_routes_decision_non_christian_tt
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.close
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.close.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.midrange.high
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.midrange.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.distant.high
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.distant.high.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.midrange.low
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.midrange.low.tooltip
					}
					100 = {
						show_chance = no
						desc = bryten_saint_olaf_routes_decision_counties.distant.low
						custom_tooltip = bryten_saint_olaf_routes_decision_counties.distant.low.tooltip
					}
				}
			}
		}		
		trigger_event = { id = bryten_norse.010	}
	}

	ai_will_do = {
		base = 25
		modifier = {
			add = -10
			has_trait = cynical
		}
		modifier = {
			add = 10
			has_trait = zealous
		}
		modifier = {
			add = -10
			has_trait = greedy
		}
		modifier = {
			add = 10
			has_trait = generous
		}
	}
}
#############################################
# German / Imperial Decisions
#############################################
integrate_sorbia_kingdom = {# Integrate Sorbia into Germany
	picture = "gfx/interface/illustrations/decisions/decision_knight_kneeling.dds"
	ai_check_interval = 60
	major = yes
	desc = integrate_sorbia_kingdom_desc

	is_shown = {
		NOT = {# this is a unique decision
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_sorbia_kingdom
			}
		}
		has_primary_title = title:e_hre # Only the emperor can do it.
		has_primary_title = title:k_east_francia # He must also be king of germany
	}

	is_valid = {
		root.culture = { has_innovation = innovation_east_settling }
		completely_controls = title:d_meissen
		completely_controls = title:d_lausitz
		has_primary_title = title:e_hre # Only the emperor can do it.
		has_primary_title = title:k_east_francia # He must also be king of germany
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	effect = {
		save_scope_as = german_king_sorbia
		show_as_tooltip = {	integrate_sorbia_kingdom_effect = yes }
		trigger_event = { id = bryten_decision.0020	}
		every_player = {
			limit = {
				NOT = { this = scope:german_king_sorbia }
				is_within_diplo_range = { CHARACTER = scope:german_king_sorbia }
			}
			trigger_event = bryten_decision.0021
		}
		#Can only be done once
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_sorbia_kingdom
			}
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
create_kingdom_of_frisia_decision = {# Create the Kingdom of Frisia
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 120

	desc = create_kingdom_of_frisia_decision_desc
	selection_tooltip = create_kingdom_of_frisia_decision_tooltip

	is_shown = {
		has_culture = culture:frisian # has to be a geat
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_frisia_kingdom
			}
		}
		NOT = { highest_held_title_tier >= tier_kingdom }
		custom_tooltip = {
			text = capital_in_frisia_region_tooltip
			capital_province = { geographical_region = custom_frisia } 
		}

	}

	is_valid = {
		custom_tooltip = {
			text = capital_in_frisia_region_tooltip
			capital_province = { geographical_region = custom_frisia } 
		}
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		completely_controls = title:k_frisia
		has_culture = culture:frisian
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {	create_kingdom_frisia_decision_scripted_effect = yes }
		save_scope_as = frisia_creator
		trigger_event = { id = bryten_decision.0022 }
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = root }
				is_within_diplo_range = { CHARACTER = root }
			}
			trigger_event = bryten_decision.0023
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_frisia_kingdom
			}
		}
	}

	cost = { gold = 300 }

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
create_kingdom_bavaria_decision = {# Create the Kingdom of Bavaria
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 120
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = {	exists = global_var:east_francia_renamed }
				}
				desc = create_kingdom_bavaria_decision_desc_east_francia
			}
			triggered_desc = {
				trigger = {
					exists = global_var:east_francia_renamed
				}
				desc = create_kingdom_bavaria_decision_desc_east_francia
			}
		}
	}
	selection_tooltip = create_kingdom_bavaria_decision_tooltip

	is_shown = {
		OR = {
			culture = { has_cultural_pillar = heritage_central_germanic }
			culture = { has_cultural_pillar = heritage_frankish }
			culture = { has_cultural_pillar = heritage_latin }
		}
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_bavaria_kingdom
			}
		}
		NOT = { highest_held_title_tier >= tier_kingdom }
		custom_tooltip = {
			text = capital_in_bavaria_region_tooltip
			capital_province = { geographical_region = custom_bavaria } 
		}

	}

	is_valid = {
		custom_tooltip = {
			text = capital_in_bavaria_region_tooltip
			capital_province = { geographical_region = custom_bavaria } 
		}
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		completely_controls = title:k_bavaria
		OR = {
			culture = { has_cultural_pillar = heritage_central_germanic }
			culture = { has_cultural_pillar = heritage_frankish }
			culture = { has_cultural_pillar = heritage_latin }
		}
	}

	is_valid_showing_failures_only = { is_available_adult = yes }

	effect = {
		show_as_tooltip = {	create_kingdom_bavaria_decision_scripted_effect = yes }
		save_scope_as = bavaria_creator
		trigger_event = { id = bryten_decision.0024 }
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = root }
				is_within_diplo_range = { CHARACTER = root }
			}
			trigger_event = bryten_decision.0025
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_bavaria_kingdom
			}
		}
	}

	cost = { gold = 300 }

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
create_kingdom_lotheringia_decision = {# Create the Kingdom of Lotharingia
	picture = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	major = yes
	ai_check_interval = 120

	desc = create_kingdom_lotheringia_decision
	selection_tooltip = create_kingdom_lotheringia_decision_tooltip

	is_shown = {
		OR = {
			culture = { has_cultural_pillar = heritage_central_germanic }
			culture = { has_cultural_pillar = heritage_frankish }
			culture = { has_cultural_pillar = heritage_latin }
		}
		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_lotheringia_kingdom
			}
		}
		NOT = { highest_held_title_tier >= tier_kingdom }
		custom_tooltip = {
			text = capital_in_lotheringia_region_tooltip
			capital_province = { geographical_region = custom_lotharingia } 
		}

	}

	is_valid = {
		custom_tooltip = {
			text = capital_in_lotheringia_region_tooltip
			capital_province = { geographical_region = custom_lotharingia } 
		}
		is_independent_ruler = yes
		prestige_level >= high_prestige_level
		completely_controls = title:k_lotharingia
		OR = {
			culture = { has_cultural_pillar = heritage_central_germanic }
			culture = { has_cultural_pillar = heritage_frankish }
			culture = { has_cultural_pillar = heritage_latin }
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {
			create_kingdom_lotharingia_decision_scripted_effect = yes
		}
		save_scope_as = lotheringia_creator
		trigger_event = { id = bryten_decision.0026 }
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = root }
				is_within_diplo_range = { CHARACTER = root }
			}
			trigger_event = bryten_decision.0027
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:create_lotheringia_kingdom
			}
		}
	}

	cost = {
		gold = 300
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
#############################################
# Fraticelli Decisions
#############################################
bryten_fraticelli_victory = {
	picture = "gfx/interface/illustrations/decisions/decision_gothic.dds"
	major = yes
	desc = bryten_fraticelli_victory_desc

	ai_check_interval = 120

	is_shown = {
		is_landed = yes
		AND = {
			has_global_variable = fransican_order_formed
			has_global_variable = fraticelli_spawned					
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_fraticelli_victory_flag
			}
		}
		has_faith = faith:fraticelli
		NOT = { has_global_variable = fraticelli_condemned_heretics }

	}

	is_valid = {
		faith.religious_head = {# The Pope can't be greedy. A greed
			NOR = {
				has_trait = greedy
				has_trait = avaricious
			}
		}
		OR = {# the Pope must like you
			faith.religious_head = {	#And they have to actually like you enough to want to invest you.
				opinion = {
					target = root
					value >= high_positive_opinion
				}
			}
			root = { has_strong_usable_hook = faith.religious_head }	#Or you have a strong hook on them that you can actually use.
		}
		faith = { fervor <= major_fervor_value } # Fraticelli must be influential
		has_faith = faith:fraticelli
		piety_level >= 4
		highest_held_title_tier > tier_kingdom
		custom_tooltip = {
			text = fraticelli_must_not_be_condemned_tooltip
			NOT = { has_global_variable = fraticelli_condemned_heretics }
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
		is_at_war = no
		is_imprisoned = no
	}

	cost = { 
		gold = { value = major_gold_value }
		prestige = { value = major_prestige_value }
	}	

	ai_potential = {
		short_term_gold > major_gold_value
	}

	effect = {
		save_scope_as = religious_leader
		faith.religious_head = { save_scope_as = pope }
		custom_tooltip = fraticelli_victory_catholic_decision_tt
		show_as_tooltip = { fraticelli_victory_decision_effects = yes } 

		hidden_effect = {# can only happen once
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_fraticelli_victory_flag
			}
		}
		trigger_event = { id = bryten_heresy.152 }
	}

	ai_will_do = {
		base = 100
	}
}
bryten_fraticelli_break_with_rome_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_gothic.dds"
	major = yes

	ai_check_interval = 120

	desc = bryten_fraticelli_break_with_rome_decision_desc
	selection_tooltip = bryten_fraticelli_break_with_rome_decision_tooltip

	is_shown = {
		# Standard filter checks.
		is_landed = yes
		exists = dynasty
		# Must be Mozarabic, and neither decision has been taken yet.
		faith = faith:fraticelli
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_fraticelli_broke_with_rome_flag
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_fraticelli_victory_flag
			}
		}
		# The Pope must exist.
		exists = faith.religious_head
	}

	is_valid = {
		# Requires a solid piety level.
		piety_level >= very_high_piety_level
		# Needs a solid chunk of Fraticelli counties.
		custom_tooltip = {
			text = bryten_fraticelli_county_count.need_at_least_twenty_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_fraticelli_county_count
				faith = root.faith
			}
		}

		faith.religious_head = {
			opinion = {
				target = root
				value < 0
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_independent_ruler = yes
		is_at_war = no
		is_imprisoned = no		
	}

	effect = {
		save_scope_as = religious_leader
		faith.religious_head = { save_scope_as = pope }
		# Keep the Pope forever, but stay ecumenical.
		custom_tooltip = bryten_fraticelli_break_with_rome_decision.tt.hof_and_ecumenism_warning
		# Send the event.
		trigger_event = { id = bryten_heresy.154 }
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_fraticelli_broke_with_rome_flag
			}
		}
	}

	cost = { piety = 1500 }

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 0

		# The AI will only consider this if they match certain trait requirements.
		modifier = {
			add = 25
			has_trait = zealous
		}
		modifier = {
			add = 25
			has_trait = theologian
		}
		modifier = {
			add = 25
			has_trait = scholar
		}
		# Or else they're just sufficiently nerdy.
		modifier = {
			add = 25
			learning >= extremely_high_skill_rating
		}
		# Plus, relations with the Pope are clinchers...
		## ... either positively...
		modifier = {
			add = 100
			AND = {
				exists = faith.religious_head
				faith.religious_head = { has_any_good_relationship_with_root_trigger = yes }
			}
		}
		## ... or negatively.
		modifier = {
			add = -100
			AND = {
				exists = faith.religious_head
				faith.religious_head = { has_any_bad_relationship_with_root_trigger = yes }
			}
		}
	}
}
#############################################
# Heretic Decisions
#############################################
bryten_bogomil_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_bogomil_council_decision_desc
	selection_tooltip = bryten_bogomil_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:bogomilist
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_bogomilism_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_bogomilism_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = bogomil_council_host
		trigger_event = { 
			id = bryten_heresy.003 
			days = 1
		}
		hidden_effect = {
			# Get the Bogomil priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_bogomilism_council_began
			}
			if = {# First Bogomil is chosen because he is the founder and it is bogomilism after all.
				limit = { 
					scope:bogomil_founder = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:bogomil_council_host
						}
					}
				}
				save_scope_as = bogomil_priest
				add_character_flag = bogomil_priest_is_bogomil
			}
			else_if = {# Second Jeremiah is chosen because he is second to Bogomil after all.
				limit = { 
					scope:bogomil_jeremiah = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:bogomil_council_host
						}
					}
				}
				save_scope_as = bogomil_priest
				add_character_flag = bogomil_priest_is_jeremiah
			}
			else_if = {# Third get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:bogomilist
				}
				cp:councillor_court_chaplain = { save_scope_as = bogomil_priest }
			}
			else = {# Create Bogomil preacher just to be safe
				create_character = {
					location = scope:bogomil_council_host.capital_province
					template = bogomil_preacher_template
					culture = scope:bogomil_council_host.culture
					faith = faith:bogomilist
					save_scope_as = bogomil_priest
				}
			}
			# Get the various positions
			if = {# Bogomil already has positions as he is the founder
				limit = {
					scope:bogomil_priest = { has_character_flag = bogomil_priest_is_bogomil	}
				}
				save_scope_value_as = {# Bogomil favors monarchianism
					name = bogomil_council_stance_gnostic
					value = flag:bogomil_council_stance_monarchianism
				}
				save_scope_value_as = {# Bogomil favors lay clergy
					name = bogomil_council_stance_clergy
					value = flag:bogomil_council_stance_lay_clergy
				}
				save_scope_value_as = {# Bogomil favors share the wealth
					name = bogomil_council_stance_wealth
					value = flag:bogomil_council_stance_share_wealth
				}
				save_scope_value_as = {# Bogomil favors share the defending pilgrims and missionaries
					name = bogomil_council_stance_peace
					value = flag:bogomil_council_stance_protect
				}
			}
			else_if = {# Jeremiah already has positions as he is the founder
				limit = {
					scope:bogomil_priest = { has_character_flag = bogomil_priest_is_jeremiah }
				}
				random_list = {# Random list as there is some things that suggest Jeremiah might have been more Trinitarian/Standard then Bogomil.
					75 = { 
						save_scope_value_as = {# Jeremiah favors Monarchianism
							name = bogomil_council_stance_gnostic
							value = flag:bogomil_council_stance_monarchianism
						}
					}
					25 = { 
						save_scope_value_as = {# Jeremiah favors Trinity
							name = bogomil_council_stance_gnostic
							value = flag:bogomil_council_stance_trinity
						}
					}
				}
				random_list = {# Jeremiah was a priest so 50/50 if he decides to have the bogomil patriarchate or not
					40 = {# Spiritual HoF
						save_scope_value_as = {
							name = bogomil_council_stance_clergy
							value = flag:bogomil_council_stance_patriarch
						}						
					}
					40 = {# Spiritual but no HoF
						save_scope_value_as = {
							name = bogomil_council_stance_clergy
							value = flag:bogomil_council_stance_priests
						}
					}
					20 = {# Lay Clergy
						save_scope_value_as = {
							name = bogomil_council_stance_clergy
							value = flag:bogomil_council_stance_lay_clergy
						}
					}
				}
				save_scope_value_as = {# Bogomil favors share the wealth
					name = bogomil_council_stance_wealth
					value = flag:bogomil_council_stance_share_wealth
				}
				save_scope_value_as = {# Jeremiah favors share the defending pilgrims and missionaries
					name = bogomil_council_stance_peace
					value = flag:bogomil_council_stance_protect
				}
			}
			else = {# for others who aren't those two
				scope:bogomil_priest = {
					random_list = {# choice for Gnosticism
						40 = {
							save_scope_value_as = {# Priest favors monarchianism
								name = bogomil_council_stance_gnostic
								value = flag:bogomil_council_stance_monarchianism
							}						
						}
						40 = {
							save_scope_value_as = {# Priest favors Dualism
								name = bogomil_council_stance_gnostic
								value = flag:bogomil_council_stance_dualism
							}
						}
						20 = {
							save_scope_value_as = {# Priest favors trinity
								name = bogomil_council_stance_gnostic
								value = flag:bogomil_council_stance_trinity
							}
						}
					}
					random_list = {# choice for Priesthood
						20 = {# Spiritual HoF
							save_scope_value_as = {
								name = bogomil_council_stance_clergy
								value = flag:bogomil_council_stance_patriarch
							}						
						}
						40 = {# Spiritual but no HoF
							save_scope_value_as = {
								name = bogomil_council_stance_clergy
								value = flag:bogomil_council_stance_priests
							}
						}
						40 = {# Lay Clergy
							save_scope_value_as = {
								name = bogomil_council_stance_clergy
								value = flag:bogomil_council_stance_lay_clergy
							}
						}
					}
					random_list = {# choice for Wealth
						40 = {# Share Wealth
							save_scope_value_as = {
								name = bogomil_council_stance_wealth
								value = flag:bogomil_council_stance_share_wealth
							}
							modifier = {
								factor = 1.5
								scope:bogomil_priest = {
									has_trait = peasant_leader
								}
							}
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = heresiarch
								}
							}	
						}
						40 = {# Shun Wealth
							save_scope_value_as = {
								name = bogomil_council_stance_wealth
								value = flag:bogomil_council_stance_shun_wealth
							}
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = generous
								}
							}	
							modifier = {
								factor = -1.5
								scope:bogomil_priest = {
									has_trait = greedy
								}
							}	
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = improvident
								}
							}	
						}
						20 = {# Pure Priesthood
							save_scope_value_as = {# Priest favors trinity
								name = bogomil_council_stance_wealth
								value = flag:bogomil_council_stance_pure_priests
							}
							modifier = {# Obviously they don't want this if they are sinful as they lose their stuff
								factor = -5
								scope:bogomil_priest = {
									num_sinful_traits > 0
								}
							}	
							modifier = {# bonus for virteous traits
								factor = 1
								scope:bogomil_priest = {
									num_virtuous_traits >= 1
								}
							}
							modifier = {# For the AI to make sure things are comitable. so they won't pick pure if they chose lay
								factor = 0
								scope:bogomil_priest = {
									scope:bogomil_council_stance_clergy = flag:bogomil_council_stance_lay_clergy
								}
							}
							modifier = {# For the AI to make sure things are comitable. so they won't pick pure if they chose lay
								factor = -100
								scope:bogomil_priest = {
									scope:bogomil_council_stance_clergy = flag:bogomil_council_stance_lay_clergy
								}
							}
						}
					}
					random_list = {# choice for Peace
						40 = {# Armed Pilgrimages
							save_scope_value_as = {# Priest favors monarchianism
								name = bogomil_council_stance_peace
								value = flag:bogomil_council_stance_protect
							}	
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = holy_warrior
								}
							}							
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = pilgrim
								}
							}							
						}
						40 = {# Pacifism
							save_scope_value_as = {
								name = bogomil_council_stance_peace
								value = flag:bogomil_council_stance_pacifism
							}
							modifier = {
								factor = -1
								scope:bogomil_priest = {
									has_trait = holy_warrior
								}
							}							
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = compassionate
								}
							}							
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = forgiving
								}
							}
							modifier = {
								factor = -1
								scope:bogomil_priest = {
									has_trait = vengeful
								}
							}
						}
						20 = {# Unrelenting Faith
							save_scope_value_as = {
								name = bogomil_council_stance_peace
								value = flag:bogomil_council_stance_unrelenting
							}
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = holy_warrior
								}
							}							
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = vengeful
								}
							}							
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = sadistic
								}
							}
							modifier = {
								factor = 1
								scope:bogomil_priest = {
									has_trait = callous
								}
							}
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_waldensian_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_waldensian_council_decision_desc
	selection_tooltip = bryten_waldensian_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:waldensian
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_waldensian_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_waldensian_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = waldensian_council_host
		trigger_event = { 
			id = bryten_heresy.052 
			days = 1
		}
		hidden_effect = {
			# Get the waldensian priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_waldensian_council_began
			}

			if = {# First Peter Waldo is chosen because he is the founder and it is waldensian after all.
				limit = { 
					scope:waldensian_founder = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:waldensian_council_host
						}
					}
				}
				save_scope_as = waldensian_priest
				add_character_flag = waldensian_priest_is_peter
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:waldensian
				}
				cp:councillor_court_chaplain = { save_scope_as = waldensian_priest }
			}
			else = {# Create waldensian preacher just to be safe
				create_character = {
					location = scope:waldensian_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:waldensian_council_host.culture
					faith = faith:waldensian
					save_scope_as = waldensian_priest
				}
			}
			# Get the various positions
			if = {# Peter Waldo already has positions as he is the founder
				limit = {
					scope:waldensian_priest = { has_character_flag = waldensian_priest_is_peter }
				}
				save_scope_value_as = {# Peter prefers lay clergy
					name = waldensian_council_stance_clergy
					value = flag:waldensian_council_stance_lay_clergy
				}
				save_scope_value_as = {# Peter prefers male clergy
					name = waldensian_council_stance_female
					value = flag:waldensian_council_stance_no_female_clergy
				}
				save_scope_value_as = {# waldensian favors no Divroce
					name = waldensian_council_stance_divorce
					value = flag:waldensian_council_stance_no_divorce
				}
				save_scope_value_as = {# waldensian favors no pilgrimage
					name = waldensian_council_stance_pilgrimage
					value = flag:waldensian_council_stance_forbid_pilgriamge
				}
			}
			else = {# for others who aren't those two
				scope:waldensian_priest = {
					random_list = {# choice for priesthood
						20 = {# Spiritual HoF
							save_scope_value_as = {
								name = waldensian_council_stance_clergy
								value = flag:waldensian_council_stance_hof
							}						
						}
						40 = {# Spiritual but no HoF
							save_scope_value_as = {
								name = waldensian_council_stance_clergy
								value = flag:waldensian_council_stance_spiritual
							}
						}
						40 = {# Lay Clergy
							save_scope_value_as = {
								name = waldensian_council_stance_clergy
								value = flag:waldensian_council_stance_lay_clergy
							}
						}
					}
					random_list = {# choice for female
						70 = {# Male only
							save_scope_value_as = {
								name = waldensian_council_stance_female
								value = flag:waldensian_council_stance_no_female_clergy
							}						
						}
						30 = {# Both
							save_scope_value_as = {
								name = waldensian_council_stance_female
								value = flag:waldensian_council_stance_yes_female_clergy
							}
						}
					}
					random_list = {# choice for divorce
						60 = {# no divorce
							save_scope_value_as = {
								name = waldensian_council_stance_divorce
								value = flag:waldensian_council_stance_no_divorce
							}
						}
						40 = {# allow divorce
							save_scope_value_as = {
								name = waldensian_council_stance_divorce
								value = flag:waldensian_council_stance_yes_divorce
							}	
						}
					}
					random_list = {# choice for pilgrimage
						80 = {# Forbiden
							save_scope_value_as = {
								name = waldensian_council_stance_pilgrimage
								value = flag:waldensian_council_stance_forbid_pilgriamge
							}							
						}
						20 = {# allow
							save_scope_value_as = {
								name = waldensian_council_stance_pilgrimage
								value = flag:waldensian_council_stance_allow_pilgrimage
							}
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_lollard_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_lollard_council_decision_desc
	selection_tooltip = bryten_lollard_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:lollard
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_lollard_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_lollard_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = lollard_council_host
		trigger_event = { 
			id = bryten_heresy.077 
			days = 1
		}
		hidden_effect = {
			# Get the lollard priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_lollard_council_began
			}

			if = {# First John Wycliff is chosen because he is the founder and it is lollard after all.
				limit = { 
					scope:lollard_founder = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:lollard_council_host
						}
					}
				}
				save_scope_as = lollard_priest
				add_character_flag = lollard_priest_is_wycliff
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:lollard
				}
				cp:councillor_court_chaplain = { save_scope_as = lollard_priest }
			}
			else = {# Create lollard preacher just to be safe
				create_character = {
					location = scope:lollard_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:lollard_council_host.culture
					faith = faith:lollard
					save_scope_as = lollard_priest
				}
			}
			# Get the various positions
			if = {# John Wycliff already has positions as he is the founder
				limit = {
					scope:lollard_priest = { has_character_flag = lollard_priest_is_wycliff }
				}
				save_scope_value_as = {# Wycliff prefers lay clergy
					name = lollard_council_stance_clergy
					value = flag:lollard_council_stance_lay_clergy
				}
				save_scope_value_as = {# Wycliff prefers male clergy
					name = lollard_council_stance_female
					value = flag:waldensian_council_stance_no_female_clergy
				}
				save_scope_value_as = {# lollard favors share no Divroce
					name = lollard_council_stance_divorce
					value = flag:lollard_council_stance_no_divorce
				}
				save_scope_value_as = {# lollard favors no pilgrimage
					name = lollard_council_stance_pilgrimage
					value = flag:lollard_council_stance_forbid_pilgriamge
				}
			}
			else = {# for others who aren't those two
				scope:lollard_priest = {
					random_list = {# choice for priesthood
						20 = {# Spiritual HoF
							save_scope_value_as = {
								name = lollard_council_stance_clergy
								value = flag:lollard_council_stance_hof
							}						
						}
						40 = {# Spiritual but no HoF
							save_scope_value_as = {
								name = lollard_council_stance_clergy
								value = flag:lollard_council_stance_spiritual
							}
						}
						40 = {# Lay Clergy
							save_scope_value_as = {
								name = lollard_council_stance_clergy
								value = flag:lollard_council_stance_lay_clergy
							}
						}
					}
					random_list = {# choice for female
						40 = {# Male only
							save_scope_value_as = {
								name = lollard_council_stance_female
								value = flag:lollard_council_stance_no_female_clergy
							}						
						}
						60 = {# Both
							save_scope_value_as = {
								name = lollard_council_stance_female
								value = flag:lollard_council_stance_yes_female_clergy
							}
						}
					}
					random_list = {# choice for divorce
						60 = {# no divorce
							save_scope_value_as = {
								name = lollard_council_stance_divorce
								value = flag:lollard_council_stance_no_divorce
							}
						}
						40 = {# allow divorce
							save_scope_value_as = {
								name = lollard_council_stance_divorce
								value = flag:lollard_council_stance_yes_divorce
							}	
						}
					}
					random_list = {# choice for pilgrimage
						80 = {# Forbiden
							save_scope_value_as = {# Priest favors monarchianism
								name = lollard_council_stance_pilgrimage
								value = flag:lollard_council_stance_forbid_pilgriamge
							}							
						}
						20 = {# allow
							save_scope_value_as = {
								name = lollard_council_stance_pilgrimage
								value = flag:lollard_council_stance_allow_pilgrimage
							}
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_arnoldism_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_arnoldism_council_decision_desc
	selection_tooltip = bryten_arnoldism_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:arnoldism
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_arnoldism_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_arnoldism_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = arnoldism_council_host
		trigger_event = { 
			id = bryten_heresy.102 
			days = 1
		}
		hidden_effect = {
			# Get the arnoldism priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_arnoldism_council_began
			}

			if = {# First Arnold of Brescia is chosen because he is the founder and it is arnoldism after all.
				limit = {
					scope:arnoldism_founder = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:arnoldism_council_host
						}
					}						
				}
				save_scope_as = arnoldism_priest
				add_character_flag = arnoldism_priest_is_arnold
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:arnoldism
				}
				cp:councillor_court_chaplain = { save_scope_as = arnoldism_priest }
			}
			else = {# Create arnoldism preacher just to be safe
				create_character = {
					location = scope:arnoldism_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:arnoldism_council_host.culture
					faith = faith:arnoldism
					save_scope_as = arnoldism_priest
				}
			}
			# Get the various positions
			if = {# Arnold of Brescia already has positions as he is the founder
				limit = {
					scope:arnoldism_priest = { has_character_flag = arnoldism_priest_is_arnold }
				}
				save_scope_value_as = {# Peter prefers Head of Faith
					name = arnoldism_council_stance_clergy
					value = flag:arnoldism_council_stance_hof
				}
				save_scope_value_as = {# Peter prefers male clergy
					name = arnoldism_council_stance_female
					value = flag:arnoldism_council_stance_no_female_clergy
				}
				save_scope_value_as = {# arnoldism favors share no Divroce
					name = arnoldism_council_stance_divorce
					value = flag:arnoldism_council_stance_no_divorce
				}
				save_scope_value_as = {# arnoldism favors pilgrimage
					name = arnoldism_council_stance_pilgrimage
					value = flag:arnoldism_council_stance_allow_pilgrimage
				}
			}
			else = {# for others who aren't those two
				scope:arnoldism_priest = {
					random_list = {# choice for priesthood
						60 = {# Spiritual HoF
							save_scope_value_as = {
								name = arnoldism_council_stance_clergy
								value = flag:arnoldism_council_stance_hof
							}						
						}
						30 = {# Spiritual but no HoF
							save_scope_value_as = {
								name = arnoldism_council_stance_clergy
								value = flag:arnoldism_council_stance_spiritual
							}
						}
						10 = {# Lay Clergy
							save_scope_value_as = {
								name = arnoldism_council_stance_clergy
								value = flag:arnoldism_council_stance_lay_clergy
							}
						}						
					}
					random_list = {# choice for female
						40 = {# Male only
							save_scope_value_as = {
								name = arnoldism_council_stance_female
								value = flag:arnoldism_council_stance_no_female_clergy
							}						
						}
						60 = {# Both
							save_scope_value_as = {
								name = arnoldism_council_stance_female
								value = flag:arnoldism_council_stance_yes_female_clergy
							}
						}
					}
					random_list = {# choice for divorce
						60 = {# no divorce
							save_scope_value_as = {
								name = arnoldism_council_stance_divorce
								value = flag:arnoldism_council_stance_no_divorce
							}
						}
						40 = {# allow divorce
							save_scope_value_as = {
								name = arnoldism_council_stance_divorce
								value = flag:arnoldism_council_stance_yes_divorce
							}	
						}
					}
					random_list = {# choice for pilgrimage
						80 = {# Forbiden
							save_scope_value_as = {# Priest favors monarchianism
								name = arnoldism_council_stance_pilgrimage
								value = flag:arnoldism_council_stance_forbid_pilgriamge
							}							
						}
						20 = {# allow
							save_scope_value_as = {
								name = arnoldism_council_stance_pilgrimage
								value = flag:arnoldism_council_stance_allow_pilgrimage
							}
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_henricians_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_henricians_council_decision_desc
	selection_tooltip = bryten_henricians_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:henricians
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_henricians_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_henricians_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = henricians_council_host
		trigger_event = { 
			id = bryten_heresy.177 
			days = 1
		}
		hidden_effect = {
			# Get the henricians priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_henricians_council_began
			}

			if = {# First Henry of Lusanne is chosen because he is the founder and it is henricians after all.
				limit = { 
					scope:henricians_founder = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:henricians_council_host

						}
					} 
				}
				save_scope_as = henricians_priest
				add_character_flag = henricians_priest_is_henry
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:henricians
				}
				cp:councillor_court_chaplain = { save_scope_as = henricians_priest }
			}
			else = {# Create henricians preacher just to be safe
				create_character = {
					location = scope:henricians_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:henricians_council_host.culture
					faith = faith:henricians
					save_scope_as = henricians_priest
				}
			}
			# Get the various positions
			if = {# Henry of Lusanne already has positions as he is the founder
				limit = {
					scope:henricians_priest = { has_character_flag = henricians_priest_is_henry }
				}
				save_scope_value_as = {# Peter prefers lay clergy
					name = henricians_council_stance_clergy
					value = flag:henricians_council_stance_lay_clergy
				}
				save_scope_value_as = {# Peter prefers male clergy
					name = henricians_council_stance_female
					value = flag:henricians_council_stance_no_female_clergy
				}
				save_scope_value_as = {# henricians favors share no Divroce
					name = henricians_council_stance_divorce
					value = flag:henricians_council_stance_no_divorce
				}
				save_scope_value_as = {# henricians favors no pilgrimage
					name = henricians_council_stance_pilgrimage
					value = flag:henricians_council_stance_forbid_pilgriamge
				}
			}
			else = {# for others who aren't those two
				scope:henricians_priest = {
					random_list = {# choice for priesthood
						20 = {# Spiritual HoF
							save_scope_value_as = {
								name = henricians_council_stance_clergy
								value = flag:henricians_council_stance_hof
							}						
						}
						40 = {# Spiritual but no HoF
							save_scope_value_as = {
								name = henricians_council_stance_clergy
								value = flag:henricians_council_stance_spiritual
							}
						}
						40 = {# Lay Clergy
							save_scope_value_as = {
								name = henricians_council_stance_clergy
								value = flag:henricians_council_stance_lay_clergy
							}
						}
					}
					random_list = {# choice for female
						40 = {# Male only
							save_scope_value_as = {
								name = henricians_council_stance_female
								value = flag:henricians_council_stance_no_female_clergy
							}						
						}
						60 = {# Both
							save_scope_value_as = {
								name = henricians_council_stance_female
								value = flag:henricians_council_stance_yes_female_clergy
							}
						}
					}
					random_list = {# choice for divorce
						60 = {# no divorce
							save_scope_value_as = {
								name = henricians_council_stance_divorce
								value = flag:henricians_council_stance_no_divorce
							}
						}
						40 = {# allow divorce
							save_scope_value_as = {
								name = henricians_council_stance_divorce
								value = flag:henricians_council_stance_yes_divorce
							}	
						}
					}
					random_list = {# choice for pilgrimage
						80 = {# Forbiden
							save_scope_value_as = {# Priest favors monarchianism
								name = henricians_council_stance_pilgrimage
								value = flag:henricians_council_stance_forbid_pilgriamge
							}							
						}
						20 = {# allow
							save_scope_value_as = {
								name = henricians_council_stance_pilgrimage
								value = flag:henricians_council_stance_allow_pilgrimage
							}
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_petrobrusian_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_petrobrusian_council_decision_desc
	selection_tooltip = bryten_petrobrusian_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:petrobrusian
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_petrobrusian_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_petrobrusian_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = petrobrusian_council_host
		trigger_event = { 
			id = bryten_heresy.202 
			days = 1
		}
		hidden_effect = {
			# Get the petrobrusian priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_petrobrusian_council_began
			}

			if = {# First Peter of Bruys is chosen because he is the founder and it is petrobrusian after all.
				limit = { 
					scope:petrobrusian_founder = { 
						AND = {
							is_alive = yes 
							is_employer_of = scope:petrobrusian_council_host
						}
					}				
				}
				save_scope_as = petrobrusian_priest
				add_character_flag = petrobrusian_priest_is_peter
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:petrobrusian
				}
				cp:councillor_court_chaplain = { save_scope_as = petrobrusian_priest }
			}
			else = {# Create petrobrusian preacher just to be safe
				create_character = {
					location = scope:petrobrusian_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:petrobrusian_council_host.culture
					faith = faith:petrobrusian
					save_scope_as = petrobrusian_priest
				}
			}
			# Get the various positions
			if = {# Peter of Bruys already has positions as he is the founder
				limit = {
					scope:petrobrusian_priest = { has_character_flag = petrobrusian_priest_is_peter }
				}
				save_scope_value_as = {# Peter prefers lay clergy
					name = petrobrusian_council_stance_clergy
					value = flag:petrobrusian_council_stance_lay_clergy
				}
				save_scope_value_as = {# Peter prefers male clergy
					name = petrobrusian_council_stance_female
					value = flag:petrobrusian_council_stance_no_female_clergy
				}
				save_scope_value_as = {# petrobrusian favors share no Divroce
					name = petrobrusian_council_stance_divorce
					value = flag:petrobrusian_council_stance_no_divorce
				}
				save_scope_value_as = {# petrobrusian favors no pilgrimage
					name = petrobrusian_council_stance_pilgrimage
					value = flag:petrobrusian_council_stance_forbid_pilgriamge
				}
			}
			else = {# for others who aren't those two
				scope:petrobrusian_priest = {
					random_list = {# choice for priesthood
						20 = {# Spiritual HoF
							save_scope_value_as = {
								name = petrobrusian_council_stance_clergy
								value = flag:petrobrusian_council_stance_hof
							}						
						}
						40 = {# Spiritual but no HoF
							save_scope_value_as = {
								name = petrobrusian_council_stance_clergy
								value = flag:petrobrusian_council_stance_spiritual
							}
						}
						40 = {# Lay Clergy
							save_scope_value_as = {
								name = petrobrusian_council_stance_clergy
								value = flag:petrobrusian_council_stance_lay_clergy
							}
						}
					}
					random_list = {# choice for female
						40 = {# Male only
							save_scope_value_as = {
								name = petrobrusian_council_stance_female
								value = flag:petrobrusian_council_stance_no_female_clergy
							}						
						}
						60 = {# Both
							save_scope_value_as = {
								name = petrobrusian_council_stance_female
								value = flag:petrobrusian_council_stance_yes_female_clergy
							}
						}
					}
					random_list = {# choice for divorce
						60 = {# no divorce
							save_scope_value_as = {
								name = petrobrusian_council_stance_divorce
								value = flag:petrobrusian_council_stance_no_divorce
							}
						}
						40 = {# allow divorce
							save_scope_value_as = {
								name = petrobrusian_council_stance_divorce
								value = flag:petrobrusian_council_stance_yes_divorce
							}	
						}
					}
					random_list = {# choice for pilgrimage
						80 = {# Forbiden
							save_scope_value_as = {# Priest favors monarchianism
								name = petrobrusian_council_stance_pilgrimage
								value = flag:petrobrusian_council_stance_forbid_pilgriamge
							}							
						}
						20 = {# allow
							save_scope_value_as = {
								name = petrobrusian_council_stance_pilgrimage
								value = flag:petrobrusian_council_stance_allow_pilgrimage
							}
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_cathar_council_decision = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	desc = bryten_cathar_council_decision_desc
	selection_tooltip = bryten_cathar_council_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		has_faith = faith:cathar
		is_landed = yes
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_cathar_council_began
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_cathar_council_completed
			}
		}
	}
	is_valid = {
		# got to be a kingdom or Empire
		highest_held_title_tier >= tier_kingdom
		# got to be somewhat prestigious
		prestige_level >= 3
		# Got to be some what pious
		piety_level >= 3
		is_independent_ruler = yes
		custom_tooltip = {# Needs a solid chunk of Bosnian counties.
			text = bryten_heretic_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_heretic_church_county_count
				faith = root.faith
			}
		}
	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		save_scope_as = cathar_council_host
		trigger_event = { 
			id = bryten_heresy.027 
			days = 1
		}
		hidden_effect = {
			# Get the cathar priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_cathar_council_began
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:cathar
				}
				cp:councillor_court_chaplain = { save_scope_as = cathar_priest }
			}
			else = {# Create cathar preacher just to be safe
				create_character = {
					location = scope:cathar_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:cathar_council_host.culture
					faith = faith:cathar
					save_scope_as = cathar_priest
				}
			}
			# Get the various positions
			scope:cathar_priest = {
				random_list = {# choice for Gnosticism
					40 = {
						save_scope_value_as = {# Priest favors monarchianism
							name = cathar_council_stance_gnostic
							value = flag:cathar_council_stance_monarchianism
						}						
					}
					40 = {
						save_scope_value_as = {# Priest favors Dualism
							name = cathar_council_stance_gnostic
							value = flag:cathar_council_stance_dualism
						}
					}
					20 = {
						save_scope_value_as = {# Priest favors trinity
							name = cathar_council_stance_gnostic
							value = flag:cathar_council_stance_trinity
						}
					}
				}
				random_list = {# choice for priesthood
					30 = {# Scholarly Priesthood
						save_scope_value_as = {
							name = cathar_council_stance_clergy
							value = flag:cathar_council_stance_scholarly
						}						
					}
					40 = {# Mystical Priesthood
						save_scope_value_as = {
							name = cathar_council_stance_clergy
							value = flag:cathar_council_stance_mystical
						}
					}
					30 = {# Pure Priesthood
						save_scope_value_as = {
							name = cathar_council_stance_clergy
							value = flag:cathar_council_stance_pure
						}
					}
				}
				random_list = {# choice for divorce
					60 = {# no divorce
						save_scope_value_as = {
							name = cathar_council_stance_divorce
							value = flag:cathar_council_stance_no_divorce
						}
					}
					40 = {# allow divorce
						save_scope_value_as = {
							name = cathar_council_stance_divorce
							value = flag:cathar_council_stance_yes_divorce
						}	
					}
				}
				random_list = {# choice for pilgrimage
					80 = {# Forbiden
						save_scope_value_as = {# Priest favors monarchianism
							name = cathar_council_stance_pilgrimage
							value = flag:cathar_council_stance_forbid_pilgriamge
						}							
					}
					20 = {# allow
						save_scope_value_as = {
							name = cathar_council_stance_pilgrimage
							value = flag:cathar_council_stance_allow_pilgrimage
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
bryten_bible_translate_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_ck2_carolingian_script_cm.dds"
	desc = bryten_bible_translate_decision_desc
	selection_tooltip = bryten_bible_translate_decision_tooltip
	major = yes

	sort_order = 80

	is_shown = {
		is_landed = yes
		highest_held_title_tier > tier_barony

		OR = {# Got to be a protestant faith
			has_faith = faith:waldensian
			has_faith = faith:lollard
			has_faith = faith:arnoldism
			has_faith = faith:henricians
			has_faith = faith:petrobrusian
		}
		NOR = {# Not if you already begun
			has_global_variable = bryten_bible_translation_waldensian_begun
			has_global_variable = bryten_bible_translation_lollard_begun 
			has_global_variable = bryten_bible_translation_arnoldism_begun 
			has_global_variable = bryten_bible_translation_henricians_begun 
			has_global_variable = bryten_bible_translation_petrobrusian_begun  
		}
		NOR = {# Can't do it if it is completed for a while.
			has_global_variable = bryten_bible_translation_waldensian_completed
			has_global_variable = bryten_bible_translation_lollard_completed 
			has_global_variable = bryten_bible_translation_arnoldism_completed
			has_global_variable = bryten_bible_translation_henricians_completed
			has_global_variable = bryten_bible_translation_petrobrusian_completed
		}
		NOT = {# Faith can't be a movement
			faith = { has_doctrine = heretic_movement_doctrine } 
		}
	}
	is_valid = {
		OR = {# Got to be focusing on Theology or Scholarship
			has_focus = learning_theology_focus 
			has_focus = learning_scholarship_focus
		}
		knows_language = language_latin		# You got to know at least Latin to begin
		gold >= medium_gold_value # needs a bit of gold to begin the task

	}

	is_valid_showing_failures_only = {
		# Not at war
		is_at_war = no
	}

	effect = {
		hidden_effect = {# Set the begining global flag for the begining. 
			if = {# Waldensians
				limit = { has_faith = faith:waldensian }
				set_global_variable = {
					name = bryten_bible_translation_waldensian_begun
					value = yes
				}
			}
			if = {# Lollard
				limit = { has_faith = faith:lollard }
				set_global_variable = {
					name = bryten_bible_translation_lollard_begun
					value = yes
				}
			}
			if = {# arnoldism
				limit = { has_faith = faith:arnoldism }
				set_global_variable = {
					name = bryten_bible_translation_arnoldism_begun
					value = yes
				}
			}
			if = {# henricians
				limit = { has_faith = faith:henricians }
				set_global_variable = {
					name = bryten_bible_translation_henricians_begun
					value = yes
				}
			}			
			if = {# petrobrusian
				limit = { has_faith = faith:petrobrusian }
				set_global_variable = {
					name = bryten_bible_translation_petrobrusian_begun
					value = yes
				}
			}
		}
		show_as_tooltip = { bryten_bible_translation_story_effect = yes }
		trigger_event = { 
			id = bryten_heresy.500 
			days = 1
		}
		hidden_effect = {
			# Get the cathar priest
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_cathar_council_began
			}
			if = {# Second get your court chaplain.
				limit = {
					exists = cp:councillor_court_chaplain
					cp:councillor_court_chaplain = { is_available_ai_adult = yes }
					faith = faith:cathar
				}
				cp:councillor_court_chaplain = { save_scope_as = cathar_priest }
			}
			else = {# Create cathar preacher just to be safe
				create_character = {
					location = scope:cathar_council_host.capital_province
					template = heretic_preacher_template
					culture = scope:cathar_council_host.culture
					faith = faith:cathar
					save_scope_as = cathar_priest
				}
			}
			# Get the various positions
			scope:cathar_priest = {
				random_list = {# choice for Gnosticism
					40 = {
						save_scope_value_as = {# Priest favors monarchianism
							name = cathar_council_stance_gnostic
							value = flag:cathar_council_stance_monarchianism
						}						
					}
					40 = {
						save_scope_value_as = {# Priest favors Dualism
							name = cathar_council_stance_gnostic
							value = flag:cathar_council_stance_dualism
						}
					}
					20 = {
						save_scope_value_as = {# Priest favors trinity
							name = cathar_council_stance_gnostic
							value = flag:cathar_council_stance_trinity
						}
					}
				}
				random_list = {# choice for priesthood
					30 = {# Scholarly Priesthood
						save_scope_value_as = {
							name = cathar_council_stance_clergy
							value = flag:cathar_council_stance_scholarly
						}						
					}
					40 = {# Mystical Priesthood
						save_scope_value_as = {
							name = cathar_council_stance_clergy
							value = flag:cathar_council_stance_mystical
						}
					}
					30 = {# Pure Priesthood
						save_scope_value_as = {
							name = cathar_council_stance_clergy
							value = flag:cathar_council_stance_pure
						}
					}
				}
				random_list = {# choice for divorce
					60 = {# no divorce
						save_scope_value_as = {
							name = cathar_council_stance_divorce
							value = flag:cathar_council_stance_no_divorce
						}
					}
					40 = {# allow divorce
						save_scope_value_as = {
							name = cathar_council_stance_divorce
							value = flag:cathar_council_stance_yes_divorce
						}	
					}
				}
				random_list = {# choice for pilgrimage
					80 = {# Forbiden
						save_scope_value_as = {# Priest favors monarchianism
							name = cathar_council_stance_pilgrimage
							value = flag:cathar_council_stance_forbid_pilgriamge
						}							
					}
					20 = {# allow
						save_scope_value_as = {
							name = cathar_council_stance_pilgrimage
							value = flag:cathar_council_stance_allow_pilgrimage
						}
					}
				}
			}
		}
	}
	cost = {
		gold = council_of_toledo_gold_cost_value
		piety = council_of_toledo_piety_cost_value
	}

	ai_check_interval = 60
	ai_potential = {
		is_ruler = yes
		short_term_gold >= council_of_toledo_gold_cost_value
	}
	ai_will_do = {
		base = 100
	}
}
#############################################
# Christian Flavor Decisions
#############################################
bryten_pregnancy_mary_vow_decision = {
	picture = "gfx/interface/illustrations/decisions/bryten_mary_vow_decision.dds"

	desc = bryten_pregnancy_mary_vow_decision_desc
	selection_tooltip = bryten_pregnancy_mary_vow_decision_tooltip

	is_shown = { 
		religion = religion:christianity_religion
		# While we could do this for every christian lady, we want only those that can be played
		is_ruler = yes
		is_landed = yes
		has_trait = pregnant
		is_female = yes
		# can't have taken a vow already.
		NOT = { has_character_flag = flag_bryten_took_mary_vow }
	}

	is_valid = {
		religion = religion:christianity_religion
		has_trait = pregnant
		is_ruler = yes
		is_landed = yes
		is_female = yes
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		bryten_basic_is_available_adult_courtier_even_if_sick_trigger = yes
	}

	effect = {
		trigger_event = { id = bryten_christian.001 }
		add_character_flag = { flag = flag_bryten_took_mary_vow }
	}

	ai_check_interval = 60
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
		ai_value_modifier = { ai_zeal = 1 }		
	}
}
bryten_bosnian_church_decide_orientation = {
	picture = "gfx/interface/illustrations/decisions/christian_council.dds"
	major = yes
	desc = bryten_bosnian_church_decide_orientation_desc

	ai_check_interval = 40
	
	is_shown = {
		faith = faith:bosnian_church
		is_landed = yes
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bryten_bosnian_church_decided
			}
		}
	}
	is_valid = {
		faith = faith:bosnian_church
		is_independent_ruler = yes
		prestige_level >= 3
		piety_level >= 3
		# Needs a solid chunk of Bosnian counties.
		custom_tooltip = {
			text = bryten_bosnian_church_count.need_at_least_twelve_same_faith_counties
			any_sub_realm_county = {
				count >= bryten_bosnian_church_county_count
				faith = root.faith
			}
		}
	}
	is_valid_showing_failures_only = {
		is_adult = yes
		bryten_is_available_adult_even_if_sick_trigger = yes
	}
	widget = {
		gui = "decision_view_widget_generic_multichoice_with_effects"
		controller = decision_option_list_controller
		decision_to_second_step_button = "CHOOSE_BOSNIAN_CHURCH_ORIENTATION"
		show_from_start = yes
		
		### Catholic
		item = {
			value = choose_catholic
			is_valid = {
				faith.religion = religion:christianity_religion
				NOT = {	is_at_war_with = title:k_papal_state.holder } # can't be at war with the Pope
				faith:catholic = { exists = faith.religious_head }# Pope must exist
			}
			current_description = bryten_choose_catholic_desc
			localization = bryten_choose_catholic_name
			icon = "gfx/interface/icons/faith/catholic.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
						any_consort = { faith = faith:catholic }
					}
					add = 20
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:catholic
						}
					}
					add = 10
				}
				if = {
					limit = {
						exists = title:k_papal_state.holder
						opinion = {
							target = title:k_papal_state.holder
							value > 0
						}
					}
					add = 10
				}
				if = {
					limit = {
						OR = {
							top_liege = { has_title = title:e_hre }
							top_liege = { has_title = title:k_papal_state }
						}						
					}
					add = 20
				}
			}
		}
		# Orthodox
		item = {
			value = choose_orthodox
			is_valid = {
				faith.religion = religion:christianity_religion
				NOT = {	is_at_war_with = title:k_orthodox.holder } # can't be at war with the Patriarch
				faith:orthodox = { exists = faith.religious_head }# Patriarch must exist
			}
			current_description = bryten_choose_orthodox_desc
			localization = bryten_choose_orthodox_name
			icon = "gfx/interface/icons/faith/orthodox.dds"
			ai_chance = {
				value = 0
				if = {
					limit = { any_consort = { faith = faith:orthodox } }
					add = 20
				}
				if = {
					limit = { any_sub_realm_county = { faith = faith:orthodox } }
					add = 10
				}
				if = {
					limit = {
						exists = title:e_byzantium.holder
						opinion = {
							target = title:e_byzantium.holder
							value > 0
						}
					}
					add = 10
				}
				if = {
					limit = {
						OR = {
							has_title = title:e_byzantium
							top_liege = { has_title = title:e_byzantium }
							top_liege = { has_title = title:k_orthodox }
							has_title = title:e_roman_empire
							top_liege = { has_title = title:e_roman_empire }
						}						
					}
					add = 20
				}
			}
		}
		# Gnosticism
		item = {
			value = choose_gnostic
			is_valid = {

			}
			current_description = bryten_choose_gnostic_desc
			localization = bryten_choose_gnostic_name
			icon = "gfx/interface/icons/faith/christianity_bogomilist.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
						NOR = {
							any_consort = { faith = faith:catholic }
							any_consort = { faith = faith:orthodox }
						}
					}
					add = 20
				}
				if = {
					limit = {
						OR = {
							any_consort = { faith = faith:bogomilist }
							any_consort = { faith = faith:paulician }
						}
					}
					add = 10
				}
				if = {
					limit = {
						exists = title:k_orthodox.holder
						opinion = {
							target = title:k_orthodox.holder
							value < 0
						}
					}
					add = 5
				}
				if = {
					limit = {
						exists = title:e_byzantium.holder
						opinion = {
							target = title:e_byzantium.holder
							value < 0
						}
					}
					add = 5
				}
				if = {
					limit = {
						NOR = {
							has_title = title:e_hre
							top_liege = { has_title = title:e_hre }
							top_liege = { has_title = title:k_papal_state }
							has_title = title:e_byzantium
							top_liege = { has_title = title:e_byzantium }
							top_liege = { has_title = title:k_orthodox }
							has_title = title:e_roman_empire
							top_liege = { has_title = title:e_roman_empire }
						}						
					}
					add = 5
				}
			}
		}
		# none Catholic nor Orthodox nor North African
		item = {
			value = choose_none
			is_valid = {

			}
			current_description = bryten_choose_none_desc
			localization = bryten_choose_none_name
			icon = "gfx/interface/icons/message_feed/heresy.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
						NOR = {
							any_consort = { faith = faith:catholic }
							any_consort = { faith = faith:orthodox }
						}
					}
					add = 20
				}
				if = {
					limit = {
						any_sub_realm_county = {
							religion = religion:christianity_religion
							NOR = {
								faith = faith:catholic
								faith = faith:orthodox
							}
						}
					}
					add = 10
				}
				if = {
					limit = {
						exists = title:k_orthodox.holder
						opinion = {
							target = title:k_orthodox.holder
							value < 0
						}
					}
					add = 10
				}
				if = {
					limit = {
						exists = title:e_byzantium.holder
						opinion = {
							target = title:e_byzantium.holder
							value < 0
						}
					}
					add = 10
				}
				if = {
					limit = {
						NOR = {
							has_title = title:e_hre
							top_liege = { has_title = title:e_hre }
							top_liege = { has_title = title:k_papal_state }
							has_title = title:e_byzantium
							top_liege = { has_title = title:e_byzantium }
							top_liege = { has_title = title:k_orthodox }
							has_title = title:e_roman_empire
							top_liege = { has_title = title:e_roman_empire }
						}						
					}
					add = 10
				}
			}
		}
	}

	cost = {
		gold = { value = major_gold_value }
	}
	
	ai_potential = {
		short_term_gold > major_gold_value
	}

	effect = {
		save_scope_as = bosnian_leader
		title:k_papal_state.holder = { save_scope_as = pope }
		title:k_orthodox.holder = { save_scope_as = patriarch }

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:bryten_bosnian_church_decided
		}
		if = {# choose Catholic
			limit = { scope:choose_catholic = yes }	
			set_global_variable = {
				name = bryten_bosnian_church_orientation_catholic
				value = yes
			}
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.catholic.1
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.catholic.2

			faith:catholic = {
				change_fervor = {
					value = 10
					desc = bryten_fervor_gain_bosnia_fervor
				}
			}

		}
		else_if = {# Choose Orthodox
			limit = { scope:choose_orthodox = yes }
			
			set_global_variable = {
				name = bryten_bosnian_church_orientation_orthodox
				value = yes
			}
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.orthodox.1
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.orthodox.2

			faith:orthodox = {
				change_fervor = {
					value = 10
					desc = bryten_fervor_gain_bosnia_fervor
				}
			}
		}
		else_if = {# Chose Gnostic
			limit = { scope:choose_gnostic = yes }
			
			set_global_variable = {
				name = bryten_bosnian_church_orientation_gnostic
				value = yes
			}

			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.gnostic.1
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.gnostic.2
			
		}
		else_if = {# chose none
			limit = { scope:choose_none = yes }			
			set_global_variable = {
				name = bryten_bosnian_church_orientation_none
				value = yes
			}
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.none.1
			custom_tooltip = bryten_bosnian_church_decide_orientation_effect_tooltip.none.2

			faith:bosnian_church = {
				change_fervor = {
					value = 10
					desc = bryten_fervor_gain_bosnia_fervor_indepedent
				}
			}
		}



		trigger_event = bryten_christian.020
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 10
			has_trait = diligent
		}
		modifier = {
			add = -30
			# Give player a chance to do it
			current_date <= 1000.1.1
		}
		modifier = {
			add = -20
			# Give player a chance to do it
			current_date <= 1100.1.1
		}
		modifier = {
			add = -10
			# Give player a chance to do it
			current_date <= 1150.1.1
		}
	}
}

